<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace Entreprise - CiaoCV</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Override logo colors to match CiaoCV branding */
        :root {
            --gradient-start: #3B82F6;
            --gradient-end: #4ADE80;
        }

        /* Text Logo - CiaoCV style */
        .logo-text {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary-color);
            text-decoration: none;
        }

        .logo-text .cv {
            color: #1E293B;
        }

        /* Table Styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .data-table th {
            text-align: left;
            padding: 1rem;
            background-color: #F9FAFB;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table tr:hover {
            background-color: #F9FAFB;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            display: inline-block;
        }

        .status-active {
            background-color: #D1FAE5;
            color: #065F46;
        }

        .status-paused {
            background-color: #FEF3C7;
            color: #92400E;
        }

        .status-closed {
            background-color: #FEE2E2;
            color: #991B1B;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
        }

        .btn-secondary {
            background: white;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: #F9FAFB;
        }

        .btn-icon {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.375rem;
        }

        .btn-icon:hover {
            background: #F3F4F6;
            color: var(--primary-color);
        }

        .filters-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .user-avatar-icon {
            width: 40px;
            height: 40px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .user-profile {
            position: relative;
            cursor: pointer;
        }

        .user-dropdown {
            position: absolute;
            top: calc(100% + 0.5rem);
            right: 0;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            min-width: 200px;
            padding: 0.5rem 0;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transform: translateY(-8px);
            transition: opacity 0.2s, visibility 0.2s, transform 0.2s;
            z-index: 1000;
        }

        .user-dropdown.open {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            transform: translateY(0);
        }

        .user-dropdown-header {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .user-dropdown-header strong {
            display: block;
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .user-dropdown-header span {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .user-dropdown a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.6rem 1rem;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: background 0.15s;
        }

        .user-dropdown a:hover {
            background: #f1f5f9;
        }

        .user-dropdown a i {
            width: 18px;
            text-align: center;
            color: var(--text-secondary);
        }

        .user-dropdown .dropdown-divider {
            height: 1px;
            background: var(--border-color);
            margin: 0.25rem 0;
        }

        .user-dropdown a.logout-link {
            color: #ef4444;
        }

        .user-dropdown a.logout-link i {
            color: #ef4444;
        }

        /* Tabs */
        .view-tabs {
            display: flex;
            gap: 0;
            margin-bottom: 1.5rem;
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            border: 1px solid var(--border-color);
            width: fit-content;
        }

        .view-tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-secondary);
            background: white;
            border: none;
            transition: all 0.2s;
        }

        .view-tab:hover {
            color: var(--primary-color);
            background: #EFF6FF;
        }

        .view-tab.active {
            color: white;
            background: var(--primary-color);
        }

        /* Language Switcher */
        .lang-switcher {
            display: flex;
            gap: 0.5rem;
            margin-right: 1rem;
        }

        .lang-btn {
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid var(--border-color);
            background: white;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .lang-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            font-size: 0.875rem;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--border-color);
        }

        /* Content sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Material Design Sidebar Styles */
        .nav-item {
            position: relative;
            overflow: hidden;
            /* For ripple effect if added later */
        }

        .nav-submenu {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.3s ease-in-out;
            padding: 0;
            margin: 0;
            opacity: 1;
            /* Opacity handled on inner */
            border: none;
            overflow: hidden;
        }

        .nav-submenu.open {
            grid-template-rows: 1fr;
            /* Margins and Paddings handled by inner */
        }

        .nav-submenu-inner {
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;

            /* Visual styles that were on parent */
            padding-left: 0.75rem;
            margin-left: 1.5rem;
            border-left: 2px solid #E5E7EB;

            /* Spacing that should toggle */
            margin-top: 0;
            margin-bottom: 0;
            opacity: 0;
            transition: margin 0.3s ease-in-out, opacity 0.3s ease-in-out;
            min-height: 0;
            /* Crucial for grid trick */
        }

        .nav-submenu.open .nav-submenu-inner {
            margin-bottom: 0.75rem;
            margin-top: 0.25rem;
            opacity: 1;
        }

        .nav-subitem {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .nav-subitem:hover {
            background-color: #F3F4F6;
            color: var(--text-primary);
        }

        .nav-subitem.active {
            background-color: #EFF6FF;
            color: var(--primary-color);
            font-weight: 500;
        }

        .submenu-arrow {
            transition: transform 0.3s ease;
        }

        /* Feedback FAB */
        .feedback-fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
            cursor: pointer;
            z-index: 2000;
            transition: all 0.2s ease;
        }

        .feedback-fab:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.5);
        }

        .feedback-fab i {
            font-size: 1.25rem;
        }

        /* Candidate Modal Styles */
        .modal-split-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .video-container {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: #000;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .timeline-container {
            max-height: 300px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            background: #F9FAFB;
        }

        .timeline-item {
            display: flex;
            gap: 0.75rem;
        }

        .timeline-date {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .star-rating-input {
            display: flex;
            gap: 0.25rem;
            color: #D1D5DB;
            /* Gray-300 */
            cursor: pointer;
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        .star-rating-input i.active {
            color: #F59E0B;
            /* Amber-500 */
        }
    </style>
</head>

<body>

    <div class="app-container">
        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <a href="https://www.ciaocv.com" style="text-decoration: none;">
                    <span class="logo-text">ciao<span class="cv">cv</span></span>
                </a>
            </div>

            <nav class="nav-links">
                <!-- DASHBOARD (Ex-Statistiques) moved to top -->
                <a href="#dashboard" class="nav-item active" data-section="statistiques" data-i18n="nav_dashboard">
                    <i class="fa-solid fa-chart-line"></i>
                    <span>Tableau de bord</span>
                </a>

                <!-- POSTES avec sous-menu -->
                <a href="#postes" class="nav-item has-submenu" data-section="postes" data-i18n="nav_postes">
                    <i class="fa-solid fa-briefcase"></i>
                    <span>Postes</span>
                    <i class="fa-solid fa-chevron-down submenu-arrow"></i>
                </a>
                <div class="nav-submenu" data-parent="postes">
                    <div class="nav-submenu-inner">
                        <a href="#postes-tous" class="nav-subitem" data-i18n="filter_all">Tous</a>
                        <a href="#postes-actifs" class="nav-subitem" data-i18n="filter_active">Actifs</a>
                        <a href="#postes-pauses" class="nav-subitem" data-i18n="filter_paused">Pausés</a>
                        <a href="#postes-fermes" class="nav-subitem" data-i18n="filter_closed">Fermés</a>
                    </div>
                </div>

                <!-- AFFICHAGES avec sous-menu -->
                <a href="#affichages" class="nav-item has-submenu" data-section="affichages" data-i18n="nav_affichages">
                    <i class="fa-solid fa-bullhorn"></i>
                    <span>Affichages</span>
                    <i class="fa-solid fa-chevron-down submenu-arrow"></i>
                </a>
                <div class="nav-submenu" data-parent="affichages">
                    <div class="nav-submenu-inner">
                        <a href="#affichages-tous" class="nav-subitem" data-i18n="filter_all">Tous</a>
                        <a href="#affichages-actifs" class="nav-subitem" data-i18n="filter_active">Actifs</a>
                        <a href="#affichages-expires" class="nav-subitem" data-i18n="filter_expired">Expirés</a>
                    </div>
                </div>

                <!-- CANDIDATS avec sous-menu -->
                <a href="#candidats" class="nav-item has-submenu" data-section="candidats" data-i18n="nav_candidats">
                    <i class="fa-solid fa-user-group"></i>
                    <span>Candidats</span>
                    <i class="fa-solid fa-chevron-down submenu-arrow"></i>
                </a>
                <div class="nav-submenu" data-parent="candidats">
                    <div class="nav-submenu-inner">
                        <a href="#candidats-tous" class="nav-subitem" data-i18n="filter_all">Tous</a>
                        <a href="#candidats-nouveaux" class="nav-subitem" data-i18n="filter_new">Nouveaux</a>
                        <a href="#candidats-evalues" class="nav-subitem" data-i18n="filter_reviewed">Évalués</a>
                        <a href="#candidats-shortlistes" class="nav-subitem"
                            data-i18n="filter_shortlisted">Shortlistés</a>
                    </div>
                </div>

                <!-- Moved Statistics from here -->
                <a href="#parametres" class="nav-item" data-section="parametres" data-i18n="nav_parametres">
                    <i class="fa-solid fa-gear"></i>
                    <span>Paramètres</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <!-- Search Bar Removed -->
                <button class="hamburger-btn" onclick="toggleSidebar()">
                    <i class="fa-solid fa-bars"></i>
                </button>

                <div style="flex: 1; display: flex; justify-content: center; align-items: center;">
                    <span style="font-weight: 700; font-size: 1.25rem; color: var(--text-primary);">OLYMEL</span>
                </div>

                <div class="header-actions">
                    <div class="lang-switcher">
                        <button class="lang-btn active" data-lang="fr">FR</button>
                        <button class="lang-btn" data-lang="en">EN</button>
                    </div>
                    <button class="icon-btn"
                        onclick="document.querySelector('a[data-section=\'parametres\']').click()"><i
                            class="fa-solid fa-gear"></i></button>
                    <button class="icon-btn">
                        <i class="fa-regular fa-bell"></i>
                    </button>
                    <div class="user-profile" onclick="toggleUserDropdown(event)">
                        <div class="user-avatar-icon">
                            <i class="fa-regular fa-user"></i>
                        </div>
                        <i class="fa-solid fa-caret-down" style="font-size: 0.75rem; color: var(--text-secondary);"></i>

                        <!-- User Dropdown -->
                        <div class="user-dropdown" id="userDropdown">
                            <div class="user-dropdown-header">
                                <strong>Utilisateur</strong>
                                <span>admin@olymel.com</span>
                            </div>
                            <a href="index.php?logout=1" class="logout-link">
                                <i class="fa-solid fa-right-from-bracket"></i>
                                <span data-i18n="dropdown_logout">Se déconnecter</span>
                            </a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">


                <!-- POSTES Section -->
                <div id="postes-section" class="content-section">
                    <div class="page-header">
                        <h1 class="page-title" data-i18n="postes_title">Postes actifs</h1>
                    </div>

                    <div class="filters-bar">
                        <div class="view-tabs">
                            <button class="view-tab active" data-i18n="filter_all">Tous</button>
                            <button class="view-tab" data-i18n="filter_active">Actifs</button>
                            <button class="view-tab" data-i18n="filter_paused">Pausés</button>
                            <button class="view-tab" data-i18n="filter_closed">Fermés</button>
                        </div>
                        <button class="btn btn-primary" onclick="openModal('poste')">
                            <i class="fa-solid fa-plus"></i>
                            <span data-i18n="add_poste">Nouveau poste</span>
                        </button>
                    </div>
                    <div style="margin-bottom: 1.5rem; display: flex; justify-content: flex-end;">
                        <div class="search-bar" style="max-width: 100%;">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            <input type="text" placeholder="Rechercher..." data-i18n-placeholder="search">
                        </div>
                    </div>

                    <table class="data-table" id="postes-table">
                        <thead>
                            <tr>
                                <th data-i18n="th_title">Titre</th>
                                <th data-i18n="th_department">Département</th>
                                <th data-i18n="th_location">Lieu</th>
                                <th data-i18n="th_status">Statut</th>
                                <th data-i18n="th_candidates">Candidats</th>
                                <th data-i18n="th_created">Créé le</th>
                                <th data-i18n="th_actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="showPosteDetail('frontend')" style="cursor: pointer;">
                                <td><strong>Développeur Frontend</strong></td>
                                <td>Technologie</td>
                                <td>Montréal, QC</td>
                                <td><span class="status-badge status-active" data-i18n="status_active">Actif</span></td>
                                <td>12</td>
                                <td>2026-01-15</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn-icon" title="Modifier" data-i18n-title="action_edit"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="btn-icon" title="Voir" data-i18n-title="action_view"><i
                                            class="fa-solid fa-eye"></i></button>
                                    <button class="btn-icon" title="Supprimer" data-i18n-title="action_delete"><i
                                            class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr onclick="showPosteDetail('manager')" style="cursor: pointer;">
                                <td><strong>Chef de projet</strong></td>
                                <td>Gestion</td>
                                <td>Toronto, ON</td>
                                <td><span class="status-badge status-active" data-i18n="status_active">Actif</span></td>
                                <td>8</td>
                                <td>2026-01-20</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn-icon" title="Modifier" data-i18n-title="action_edit"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="btn-icon" title="Voir" data-i18n-title="action_view"><i
                                            class="fa-solid fa-eye"></i></button>
                                    <button class="btn-icon" title="Supprimer" data-i18n-title="action_delete"><i
                                            class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr onclick="showPosteDetail('designer')" style="cursor: pointer;">
                                <td><strong>Designer UX/UI</strong></td>
                                <td>Design</td>
                                <td>Télétravail</td>
                                <td><span class="status-badge status-paused" data-i18n="status_paused">Pausé</span></td>
                                <td>5</td>
                                <td>2026-01-10</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn-icon" title="Modifier" data-i18n-title="action_edit"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="btn-icon" title="Voir" data-i18n-title="action_view"><i
                                            class="fa-solid fa-eye"></i></button>
                                    <button class="btn-icon" title="Supprimer" data-i18n-title="action_delete"><i
                                            class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr onclick="showPosteDetail('analyst')" style="cursor: pointer;">
                                <td><strong>Analyste d'affaires</strong></td>
                                <td>Stratégie</td>
                                <td>Vancouver, BC</td>
                                <td><span class="status-badge status-closed" data-i18n="status_closed">Fermé</span></td>
                                <td>15</td>
                                <td>2025-12-01</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn-icon" title="Modifier" data-i18n-title="action_edit"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="btn-icon" title="Voir" data-i18n-title="action_view"><i
                                            class="fa-solid fa-eye"></i></button>
                                    <button class="btn-icon" title="Supprimer" data-i18n-title="action_delete"><i
                                            class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- POSTE DETAIL Section -->
                <div id="poste-detail-section" class="content-section" style="padding-top: 1rem;">
                    <div class="page-header" style="justify-content: flex-start; gap: 1rem; align-items: center;">
                        <button class="btn-icon" onclick="goBackToPostes()" style="font-size: 1.25rem;">
                            <i class="fa-solid fa-arrow-left"></i>
                        </button>
                        <div>
                            <h1 class="page-title" id="detail-poste-title">Titre du Poste</h1>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);" id="detail-poste-dept-loc">
                                Département • Lieu</div>
                        </div>
                        <span class="status-badge" id="detail-poste-status" style="margin-left: auto;">Statut</span>
                    </div>

                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
                        <!-- Left Column: Description & Questions -->
                        <div>
                            <div class="card" style="margin-bottom: 2rem;">
                                <h3 style="font-size: 1.125rem; margin-bottom: 1rem;">Description</h3>
                                <div id="detail-poste-description"
                                    style="color: var(--text-primary); line-height: 1.6;">
                                    Description goes here...
                                </div>
                            </div>

                            <div class="card">
                                <h3 style="font-size: 1.125rem; margin-bottom: 1rem;">Questions de présélection</h3>
                                <ul id="detail-poste-questions"
                                    style="list-style-type: disc; padding-left: 1.5rem; color: var(--text-primary); line-height: 1.6;">
                                    <!-- Questions injected here -->
                                </ul>
                            </div>
                        </div>

                        <!-- Right Column: Meta Info -->
                        <div>
                            <div class="card">
                                <h3 style="font-size: 1rem; margin-bottom: 1rem; color: var(--text-secondary);">
                                    Informations</h3>

                                <div style="margin-bottom: 1rem;">
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">Candidats</div>
                                    <div style="font-size: 1.25rem; font-weight: 600;" id="detail-poste-candidates">0
                                    </div>
                                </div>

                                <div style="margin-bottom: 1rem;">
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">Créé le</div>
                                    <div style="font-size: 1rem;" id="detail-poste-date">2026-01-01</div>
                                </div>

                                <div style="margin-top: 2rem; display: flex; flex-direction: column; gap: 0.5rem;">
                                    <button class="btn btn-primary" style="justify-content: center;">Modifier le
                                        poste</button>
                                    <button class="btn btn-secondary" style="justify-content: center;">Voir les
                                        candidats</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AFFICHAGE DETAIL Section -->
                <div id="affichage-detail-section" class="content-section" style="padding-top: 1rem;">
                    <div class="page-header" style="justify-content: flex-start; gap: 1rem; align-items: center;">
                        <button class="btn-icon" onclick="goBackToAffichages()" style="font-size: 1.25rem;">
                            <i class="fa-solid fa-arrow-left"></i>
                        </button>
                        <div>
                            <h1 class="page-title" id="detail-affichage-title">Titre de l'Affichage</h1>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);"
                                id="detail-affichage-platform">Plateforme</div>
                        </div>
                        <span class="status-badge" id="detail-affichage-status" style="margin-left: auto;">Statut</span>
                    </div>

                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
                        <!-- Left: Preview -->
                        <div class="card"
                            style="min-height: 400px; display: flex; align-items: center; justify-content: center; background-color: #F8FAFC; border: 2px dashed #CBD5E1;">
                            <div style="text-align: center; color: var(--text-secondary);">
                                <i class="fa-regular fa-image" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                                <p>Aperçu de la publicité</p>
                            </div>
                        </div>

                        <!-- Right: Info -->
                        <div>
                            <div class="card">
                                <h3 style="font-size: 1rem; margin-bottom: 1rem; color: var(--text-secondary);">
                                    Performances</h3>
                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                                    <div>
                                        <div style="font-size: 0.75rem; color: var(--text-secondary);">Vues</div>
                                        <div style="font-size: 1.5rem; font-weight: 700;" id="detail-affichage-views">0
                                        </div>
                                    </div>
                                    <div>
                                        <div style="font-size: 0.75rem; color: var(--text-secondary);">Candidatures
                                        </div>
                                        <div style="font-size: 1.5rem; font-weight: 700;" id="detail-affichage-apps">0
                                        </div>
                                    </div>
                                </div>

                                <h3
                                    style="font-size: 1rem; margin-bottom: 1rem; color: var(--text-secondary); margin-top: 1.5rem;">
                                    Détails</h3>
                                <div style="margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
                                    <span style="color: var(--text-secondary);">Début</span>
                                    <span style="font-weight: 500;" id="detail-affichage-start">2026-01-01</span>
                                </div>
                                <div style="margin-bottom: 0.5rem; display: flex; justify-content: space-between;">
                                    <span style="color: var(--text-secondary);">Fin</span>
                                    <span style="font-weight: 500;" id="detail-affichage-end">2026-02-01</span>
                                </div>

                                <div style="margin-top: 2rem;">
                                    <button class="btn btn-primary"
                                        style="width: 100%; justify-content: center;">Modifier l'affichage</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AFFICHAGE CANDIDATS Section -->
                <div id="affichage-candidats-section" class="content-section" style="padding-top: 1rem;">
                    <div class="page-header" style="justify-content: flex-start; gap: 1rem; align-items: center;">
                        <button class="btn-icon" onclick="goBackToAffichages()" style="font-size: 1.25rem;">
                            <i class="fa-solid fa-arrow-left"></i>
                        </button>
                        <div>
                            <h1 class="page-title" id="affichage-candidats-title">Candidats</h1>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);" id="affichage-candidats-subtitle">Plateforme</div>
                        </div>
                        <span class="status-badge" id="affichage-candidats-status" style="margin-left: auto;">Statut</span>
                        <button class="btn" onclick="openCloseAffichageModal()" style="margin-left: 1rem; background: #FEE2E2; color: #991B1B; border: 1px solid #FECACA; font-size: 0.85rem; padding: 0.5rem 1rem;">
                            <i class="fa-solid fa-xmark"></i>
                            <span>Fermer l'affichage</span>
                        </button>
                    </div>

                    <div class="filters-bar">
                        <div class="view-tabs">
                            <button class="view-tab active">Tous</button>
                            <button class="view-tab">Nouveaux</button>
                            <button class="view-tab">Évalués</button>
                            <button class="view-tab">Favoris</button>
                        </div>
                    </div>
                    <div style="margin-bottom: 1.5rem; display: flex; justify-content: flex-end;">
                        <div class="search-bar" style="max-width: 100%;">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            <input type="text" placeholder="Rechercher...">
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Candidat</th>
                                <th>Statut</th>
                                <th>Vidéo</th>
                                <th>Note</th>
                                <th>Postulé le</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="affichage-candidats-tbody">
                            <!-- Filled by JS -->
                        </tbody>
                    </table>
                </div>

                <!-- AFFICHAGES Section -->
                <div id="affichages-section" class="content-section">
                    <div class="page-header">
                        <h1 class="page-title" data-i18n="affichages_title">Affichages en cours</h1>
                    </div>

                    <div class="filters-bar">
                        <div class="view-tabs">
                            <button class="view-tab active" data-i18n="filter_all">Tous</button>
                            <button class="view-tab" data-i18n="filter_active">Actifs</button>
                            <button class="view-tab" data-i18n="filter_expired">Expirés</button>
                        </div>
                        <button class="btn btn-primary" onclick="openModal('affichage')">
                            <i class="fa-solid fa-plus"></i>
                            <span data-i18n="add_affichage">Nouvel affichage</span>
                        </button>
                    </div>
                    <div style="margin-bottom: 1.5rem; display: flex; justify-content: flex-end;">
                        <div class="search-bar" style="max-width: 100%;">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            <input type="text" placeholder="Rechercher..." data-i18n-placeholder="search">
                        </div>
                    </div>

                    <table class="data-table" id="affichages-table">
                        <thead>
                            <tr>
                                <th data-i18n="th_poste">Poste</th>
                                <th data-i18n="th_platform">Plateforme</th>
                                <th data-i18n="th_start_date">Date début</th>
                                <th data-i18n="th_end_date">Date fin</th>
                                <th data-i18n="th_status">Statut</th>
                                <th data-i18n="th_views">Vues</th>
                                <th data-i18n="th_applications">Candidatures</th>
                                <th data-i18n="th_actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="showAffichageDetail('frontend-linkedin')" style="cursor: pointer;">
                                <td><strong>Développeur Frontend</strong></td>
                                <td><i class="fa-brands fa-linkedin" style="color: #0A66C2;"></i> LinkedIn</td>
                                <td>2026-01-15</td>
                                <td>2026-02-15</td>
                                <td><span class="status-badge status-active" data-i18n="status_active">Actif</span></td>
                                <td>1,245</td>
                                <td>12</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn-icon" title="Modifier" data-i18n-title="action_edit"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="btn-icon" title="Voir" data-i18n-title="action_view"><i
                                            class="fa-solid fa-eye"></i></button>
                                    <button class="btn-icon" title="Supprimer" data-i18n-title="action_delete"><i
                                            class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr onclick="showAffichageDetail('frontend-site')" style="cursor: pointer;">
                                <td><strong>Développeur Frontend</strong></td>
                                <td><i class="fa-solid fa-globe" style="color: var(--primary-color);"></i> Site carrière
                                </td>
                                <td>2026-01-15</td>
                                <td>2026-03-15</td>
                                <td><span class="status-badge status-active" data-i18n="status_active">Actif</span></td>
                                <td>458</td>
                                <td>6</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn-icon" title="Modifier" data-i18n-title="action_edit"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="btn-icon" title="Voir" data-i18n-title="action_view"><i
                                            class="fa-solid fa-eye"></i></button>
                                    <button class="btn-icon" title="Supprimer" data-i18n-title="action_delete"><i
                                            class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr onclick="showAffichageDetail('manager-linkedin')" style="cursor: pointer;">
                                <td><strong>Chef de projet</strong></td>
                                <td><i class="fa-brands fa-linkedin" style="color: #0A66C2;"></i> LinkedIn</td>
                                <td>2026-01-20</td>
                                <td>2026-02-20</td>
                                <td><span class="status-badge status-active" data-i18n="status_active">Actif</span></td>
                                <td>892</td>
                                <td>8</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn-icon" title="Modifier" data-i18n-title="action_edit"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="btn-icon" title="Voir" data-i18n-title="action_view"><i
                                            class="fa-solid fa-eye"></i></button>
                                    <button class="btn-icon" title="Supprimer" data-i18n-title="action_delete"><i
                                            class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Designer UX/UI</strong></td>
                                <td><i class="fa-solid fa-globe" style="color: var(--primary-color);"></i> Indeed</td>
                                <td>2026-01-10</td>
                                <td>2026-02-01</td>
                                <td><span class="status-badge status-paused" data-i18n="status_paused">Pausé</span></td>
                                <td>321</td>
                                <td>5</td>
                                <td>
                                    <button class="btn-icon" title="Modifier" data-i18n-title="action_edit"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="btn-icon" title="Voir"><i class="fa-solid fa-eye"></i></button>
                                    <button class="btn-icon" title="Supprimer"><i
                                            class="fa-solid fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- CANDIDATS Section -->
                <div id="candidats-section" class="content-section">
                    <div class="page-header">
                        <h1 class="page-title" data-i18n="candidats_title">Candidats</h1>
                    </div>

                    <div class="filters-bar">
                        <div class="view-tabs">
                            <button class="view-tab active" data-i18n="filter_all">Tous</button>
                            <button class="view-tab" data-i18n="filter_new">Nouveaux</button>
                            <button class="view-tab" data-i18n="filter_reviewed">Évalués</button>
                            <button class="view-tab" data-i18n="filter_shortlisted">Favoris</button>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <select class="form-select" style="width: auto;">
                                <option data-i18n="filter_all_jobs">Tous les postes</option>
                                <option>Développeur Frontend</option>
                                <option>Chef de projet</option>
                                <option>Designer UX/UI</option>
                            </select>
                        </div>
                    </div>
                    <div style="margin-bottom: 1.5rem; display: flex; justify-content: flex-end;">
                        <div class="search-bar" style="max-width: 100%;">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            <input type="text" placeholder="Rechercher..." data-i18n-placeholder="search">
                        </div>
                    </div>

                    <table class="data-table" id="candidats-table">
                        <thead>
                            <tr>
                                <th data-i18n="th_candidate">Candidat</th>
                                <th data-i18n="th_poste">Poste</th>
                                <th data-i18n="th_status">Statut</th>
                                <th data-i18n="th_video">Vidéo</th>
                                <th data-i18n="th_rating">Note</th>
                                <th data-i18n="th_applied">Postulé le</th>
                                <th data-i18n="th_actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="showCandidateDetail('sophie')" style="cursor: pointer;">
                                <td>
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <img src="https://ui-avatars.com/api/?name=Sophie+Martin&background=3B82F6&color=fff"
                                            class="avatar" alt="">
                                        <div>
                                            <strong>Sophie Martin</strong>
                                            <div style="font-size: 0.75rem; color: var(--text-secondary);">
                                                sophie.martin@email.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>Développeur Frontend</td>
                                <td><span class="status-badge" style="background: #DBEAFE; color: #1E40AF;"
                                        data-i18n="status_new">Nouveau</span></td>
                                <td><i class="fa-solid fa-circle-check" style="color: var(--success-color);"></i></td>
                                <td>
                                    <div style="color: #F59E0B;">
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-regular fa-star"></i>
                                    </div>
                                </td>
                                <td>2026-02-01</td>
                                <td>
                                    <button class="btn-icon" title="Voir vidéo" onclick="event.stopPropagation()"><i
                                            class="fa-solid fa-play"></i></button>
                                    <button class="btn-icon" title="Profil" onclick="event.stopPropagation()"><i
                                            class="fa-solid fa-user"></i></button>
                                    <button class="btn-icon" title="Mettre en favoris" onclick="event.stopPropagation()"
                                        data-i18n-title="action_shortlist"><i class="fa-regular fa-star"></i></button>
                                </td>
                            </tr>
                            <tr onclick="showCandidateDetail('jean')" style="cursor: pointer;">
                                <td>
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <img src="https://ui-avatars.com/api/?name=Jean+Dupont&background=10B981&color=fff"
                                            class="avatar" alt="">
                                        <div>
                                            <strong>Jean Dupont</strong>
                                            <div style="font-size: 0.75rem; color: var(--text-secondary);">
                                                jean.dupont@email.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>Chef de projet</td>
                                <td><span class="status-badge status-active" data-i18n="status_reviewed">Évalué</span>
                                </td>
                                <td><i class="fa-solid fa-circle-check" style="color: var(--success-color);"></i></td>
                                <td>
                                    <div style="color: #F59E0B;">
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                    </div>
                                </td>
                                <td>2026-01-28</td>
                                <td>
                                    <button class="btn-icon" title="Voir vidéo" onclick="event.stopPropagation()"><i
                                            class="fa-solid fa-play"></i></button>
                                    <button class="btn-icon" title="Profil" onclick="event.stopPropagation()"><i
                                            class="fa-solid fa-user"></i></button>
                                    <button class="btn-icon" title="Mettre en favoris" onclick="event.stopPropagation()"
                                        data-i18n-title="action_shortlist"><i class="fa-regular fa-star"></i></button>
                                </td>
                            </tr>
                            <tr onclick="showCandidateDetail('marie')" style="cursor: pointer;">
                                <td>
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <img src="https://ui-avatars.com/api/?name=Marie+Tremblay&background=8B5CF6&color=fff"
                                            class="avatar" alt="">
                                        <div>
                                            <strong>Marie Tremblay</strong>
                                            <div style="font-size: 0.75rem; color: var(--text-secondary);">
                                                marie.t@email.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>Designer UX/UI</td>
                                <td><span class="status-badge" style="background: #FEE2E2; color: #991B1B;"
                                        data-i18n="status_rejected">Refusé</span></td>
                                <td><i class="fa-solid fa-circle-check" style="color: var(--success-color);"></i></td>
                                <td>
                                    <div style="color: #F59E0B;">
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-regular fa-star"></i>
                                        <i class="fa-regular fa-star"></i>
                                        <i class="fa-regular fa-star"></i>
                                    </div>
                                </td>
                                <td>2026-01-25</td>
                                <td>
                                    <button class="btn-icon" title="Voir vidéo" onclick="event.stopPropagation()"><i
                                            class="fa-solid fa-play"></i></button>
                                    <button class="btn-icon" title="Profil" onclick="event.stopPropagation()"><i
                                            class="fa-solid fa-user"></i></button>
                                    <button class="btn-icon" title="Mettre en favoris" onclick="event.stopPropagation()"
                                        data-i18n-title="action_shortlist"><i class="fa-regular fa-star"></i></button>
                                </td>
                            </tr>
                            <tr onclick="showCandidateDetail('pierre')" style="cursor: pointer;">
                                <td>
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <img src="https://ui-avatars.com/api/?name=Pierre+Lavoie&background=EC4899&color=fff"
                                            class="avatar" alt="">
                                        <div>
                                            <strong>Pierre Lavoie</strong>
                                            <div style="font-size: 0.75rem; color: var(--text-secondary);">
                                                pierre.l@email.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>Développeur Frontend</td>
                                <td><span class="status-badge" style="background: #D1FAE5; color: #065F46;"
                                        data-i18n="status_shortlisted">Favori</span></td>
                                <td><i class="fa-solid fa-circle-check" style="color: var(--success-color);"></i></td>
                                <td>
                                    <div style="color: #F59E0B;">
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-regular fa-star"></i>
                                    </div>
                                </td>
                                <td>2026-01-22</td>
                                <td>
                                    <button class="btn-icon" title="Voir vidéo" onclick="event.stopPropagation()"><i
                                            class="fa-solid fa-play"></i></button>
                                    <button class="btn-icon" title="Profil" onclick="event.stopPropagation()"><i
                                            class="fa-solid fa-user"></i></button>
                                    <button class="btn-icon" title="Mettre en favoris" onclick="event.stopPropagation()"
                                        data-i18n-title="action_shortlist"><i class="fa-solid fa-star"
                                            style="color: #F59E0B;"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Candidate Detail Section -->
                <div id="candidate-detail-section" class="content-section" style="padding-top: 1rem;">
                    <div class="page-header" style="justify-content: flex-start; gap: 1rem; align-items: center;">
                        <button class="btn-icon" onclick="goBackToCandidates()" style="font-size: 1.25rem;">
                            <i class="fa-solid fa-arrow-left"></i>
                        </button>
                        <div>
                            <h1 class="page-title" id="detail-candidate-name">Nom du Candidat</h1>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);"
                                id="detail-candidate-role-source">Poste • Source</div>
                        </div>
                        <div class="action-group">
                            <button class="favorite-btn" id="detail-candidate-favorite" onclick="toggleFavorite()"><i
                                    class="fa-regular fa-star"></i></button>
                            <select class="status-select" id="detail-candidate-status-select"
                                onchange="updateCandidateStatus(this.value)">
                                <option value="new">Nouveau</option>
                                <option value="reviewed">Évalué</option>
                                <option value="shortlisted">Favori</option>
                                <option value="interview">Entretien</option>
                                <option value="rejected">Refusé</option>
                                <option value="hired">Embauché</option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-split-view" style="margin-top: 1.5rem;">
                        <!-- Left Column: Video & Info -->
                        <div class="modal-left">
                            <div class="video-container">
                                <video controls style="display:none;" id="detail-candidate-video-player">
                                    <source src="" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <div id="detail-video-placeholder" style="text-align: center;">
                                    <i class="fa-solid fa-play-circle" style="font-size: 3rem; opacity: 0.8;"></i>
                                    <div style="margin-top: 0.5rem;" data-i18n="video_preview">Aperçu vidéo</div>
                                </div>
                            </div>

                            <div class="card" style="padding: 1rem; border: 1px solid var(--border-color);">
                                <h3
                                    style="font-size: 1rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-regular fa-envelope"></i> Email
                                </h3>
                                <p id="detail-candidate-email"
                                    style="color: var(--text-secondary); margin-bottom: 1rem;">email@example.com</p>

                                <h3
                                    style="font-size: 1rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fa-solid fa-phone"></i> <span data-i18n="form_phone">Téléphone</span>
                                </h3>
                                <p id="detail-candidate-phone" style="color: var(--text-secondary);">+1 514 555-0199</p>
                            </div>
                        </div>

                        <!-- Right Column: Ratings & Timeline -->
                        <div class="modal-right">
                            <h3 style="font-size: 1rem; margin-bottom: 0.5rem;" data-i18n="th_rating">Note</h3>
                            <div class="star-rating-input" id="detail-star-rating">
                                <i class="fa-solid fa-star" data-value="1" onclick="setRating(1)"></i>
                                <i class="fa-solid fa-star" data-value="2" onclick="setRating(2)"></i>
                                <i class="fa-solid fa-star" data-value="3" onclick="setRating(3)"></i>
                                <i class="fa-solid fa-star" data-value="4" onclick="setRating(4)"></i>
                                <i class="fa-solid fa-star" data-value="5" onclick="setRating(5)"></i>
                            </div>

                            <h3 style="font-size: 1rem; margin-bottom: 0.5rem;" data-i18n="comments_title">Commentaires
                            </h3>
                            <div class="timeline-container" id="detail-timeline-list">
                                <!-- Timeline items will be injected here -->
                            </div>

                            <div style="display: flex; gap: 0.5rem;">
                                <textarea class="form-input" id="detail-new-comment-input" rows="1"
                                    placeholder="Ajouter une note..." style="resize: none;"
                                    data-i18n-placeholder="add_note_placeholder"></textarea>
                                <button class="btn btn-primary" onclick="addComment()">
                                    <i class="fa-solid fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- STATISTIQUES / TABLEAU DE BORD Section -->
                <div id="statistiques-section" class="content-section active">
                    <div class="page-header">
                        <h1 class="page-title" data-i18n="statistiques_title">Tableau de bord</h1>
                    </div>

                    <!-- Forfait Banner -->
                    <div style="background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%); border-radius: 16px; padding: 1.5rem 2rem; color: white; box-shadow: 0 10px 40px -10px rgba(59, 130, 246, 0.5); margin-bottom: 2rem; display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 1.25rem;">
                            <div style="width: 52px; height: 52px; background: rgba(255,255,255,0.2); border-radius: 14px; display: flex; align-items: center; justify-content: center;">
                                <i class="fa-solid fa-gem" style="font-size: 1.5rem;"></i>
                            </div>
                            <div>
                                <div style="font-size: 1.25rem; font-weight: 700;">Forfait Platine</div>
                            </div>
                        </div>
                        <a href="#" onclick="document.querySelector('a[data-section=\'parametres\']').click(); setTimeout(function(){ document.querySelector('.settings-nav-item[data-target=\'settings-billing\']').click(); }, 50); return false;" style="background: rgba(255,255,255,0.2); color: white; text-decoration: none; padding: 0.5rem 1.25rem; border-radius: 9999px; font-size: 0.85rem; font-weight: 600; transition: background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">Gérer mon forfait</a>
                    </div>

                    <!-- KPI Cards -->
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-bottom: 2rem;">
                        <!-- Mon forfait (progress) -->
                        <div style="background: white; border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border: 1px solid rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div>
                                    <div style="font-size: 0.8rem; color: #64748B; font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em;">Mon forfait</div>
                                    <div style="font-size: 2rem; font-weight: 700; color: #1E293B; margin-top: 0.25rem;">20 <span style="font-size: 1rem; font-weight: 500; color: #94A3B8;">/ 50</span></div>
                                    <div style="font-size: 0.8rem; color: #64748B; margin-top: 0.25rem;">candidats disponibles</div>
                                </div>
                                <div style="width: 44px; height: 44px; background: linear-gradient(135deg, #3B82F6, #60A5FA); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fa-solid fa-users" style="color: white; font-size: 1.1rem;"></i>
                                </div>
                            </div>
                            <!-- Progress bar -->
                            <div style="margin-top: 1rem; background: #E2E8F0; border-radius: 9999px; height: 8px; overflow: hidden;">
                                <div style="width: 40%; height: 100%; background: linear-gradient(90deg, #3B82F6, #60A5FA); border-radius: 9999px;"></div>
                            </div>
                        </div>

                        <!-- Postes actifs -->
                        <div style="background: white; border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border: 1px solid rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div>
                                    <div style="font-size: 0.8rem; color: #64748B; font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em;" data-i18n="stat_active_jobs">Postes actifs</div>
                                    <div style="font-size: 2rem; font-weight: 700; color: #1E293B; margin-top: 0.25rem;">3</div>
                                </div>
                                <div style="width: 44px; height: 44px; background: linear-gradient(135deg, #64748B, #94A3B8); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fa-solid fa-briefcase" style="color: white; font-size: 1.1rem;"></i>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; font-size: 0.8rem; color: #64748B;">
                                <span style="color: #22C55E; font-weight: 600;"><i class="fa-solid fa-arrow-up"></i> 1</span> depuis le mois dernier
                            </div>
                        </div>

                        <!-- Candidats en attente -->
                        <div style="background: white; border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border: 1px solid rgba(0,0,0,0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div>
                                    <div style="font-size: 0.8rem; color: #64748B; font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em;">Candidats en attente</div>
                                    <div style="font-size: 2rem; font-weight: 700; color: #1E293B; margin-top: 0.25rem;">7</div>
                                </div>
                                <div style="width: 44px; height: 44px; background: linear-gradient(135deg, #F59E0B, #FBBF24); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fa-solid fa-clock" style="color: white; font-size: 1.1rem;"></i>
                                </div>
                            </div>
                            <div style="margin-top: 1rem; font-size: 0.8rem; color: #F59E0B; font-weight: 600;">
                                <i class="fa-solid fa-circle-exclamation"></i> En attente de réponse
                            </div>
                        </div>
                    </div>

                    <!-- Chart : Candidatures par mois -->
                    <div style="background: white; border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border: 1px solid rgba(0,0,0,0.05); margin-bottom: 1.5rem;">
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem;">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #3B82F6, #60A5FA); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                <i class="fa-solid fa-chart-bar" style="color: white;"></i>
                            </div>
                            <h2 style="font-size: 1rem; font-weight: 600; color: #1E293B; margin: 0;" data-i18n="chart_applications">Candidatures par mois</h2>
                        </div>
                        <div style="height: 200px; display: flex; align-items: flex-end; justify-content: space-around; background: linear-gradient(180deg, rgba(59,130,246,0.03) 0%, transparent 100%); border-radius: 12px; padding: 1rem;">
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                                <div style="width: 32px; height: 60px; background: linear-gradient(180deg, #3B82F6, #60A5FA); border-radius: 6px;"></div>
                                <span style="font-size: 0.75rem; color: #64748B; font-weight: 500;">Sep</span>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                                <div style="width: 32px; height: 100px; background: linear-gradient(180deg, #3B82F6, #60A5FA); border-radius: 6px;"></div>
                                <span style="font-size: 0.75rem; color: #64748B; font-weight: 500;">Oct</span>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                                <div style="width: 32px; height: 80px; background: linear-gradient(180deg, #3B82F6, #60A5FA); border-radius: 6px;"></div>
                                <span style="font-size: 0.75rem; color: #64748B; font-weight: 500;">Nov</span>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                                <div style="width: 32px; height: 140px; background: linear-gradient(180deg, #3B82F6, #60A5FA); border-radius: 6px;"></div>
                                <span style="font-size: 0.75rem; color: #64748B; font-weight: 500;">Déc</span>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                                <div style="width: 32px; height: 180px; background: linear-gradient(180deg, #1D4ED8, #3B82F6); border-radius: 6px; box-shadow: 0 4px 12px rgba(59,130,246,0.3);"></div>
                                <span style="font-size: 0.75rem; color: #3B82F6; font-weight: 600;">Jan</span>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                                <div style="width: 32px; height: 120px; background: linear-gradient(180deg, #3B82F6, #60A5FA); border-radius: 6px;"></div>
                                <span style="font-size: 0.75rem; color: #64748B; font-weight: 500;">Fév</span>
                            </div>
                        </div>
                    </div>

                    <!-- Journalisation des événements -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Journalisation des événements</h2>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Utilisateur</th>
                                    <th>Action</th>
                                    <th>Détails</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="white-space: nowrap; color: #64748B; font-size: 0.85rem;">6 fév 2026, 14:32</td>
                                    <td><strong>Marie Tremblay</strong></td>
                                    <td><span style="background: #DBEAFE; color: #1D4ED8; padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">Évaluation</span></td>
                                    <td style="color: #64748B; font-size: 0.875rem;">A noté le candidat <strong>Jean Dupont</strong> — 4/5 étoiles</td>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; color: #64748B; font-size: 0.85rem;">6 fév 2026, 11:15</td>
                                    <td><strong>Pierre Roy</strong></td>
                                    <td><span style="background: #D1FAE5; color: #065F46; padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">Création</span></td>
                                    <td style="color: #64748B; font-size: 0.875rem;">A créé un nouvel affichage pour <strong>Développeur Frontend</strong></td>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; color: #64748B; font-size: 0.85rem;">5 fév 2026, 16:48</td>
                                    <td><strong>Marie Tremblay</strong></td>
                                    <td><span style="background: #FEF3C7; color: #92400E; padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">Modification</span></td>
                                    <td style="color: #64748B; font-size: 0.875rem;">A modifié les questions du poste <strong>Chef de projet</strong></td>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; color: #64748B; font-size: 0.85rem;">5 fév 2026, 09:22</td>
                                    <td><strong>Pierre Roy</strong></td>
                                    <td><span style="background: #E0E7FF; color: #3730A3; padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">Invitation</span></td>
                                    <td style="color: #64748B; font-size: 0.875rem;">A invité <strong>Sophie Martin</strong> à une entrevue vidéo</td>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; color: #64748B; font-size: 0.85rem;">4 fév 2026, 15:05</td>
                                    <td><strong>Marie Tremblay</strong></td>
                                    <td><span style="background: #FEE2E2; color: #991B1B; padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">Suppression</span></td>
                                    <td style="color: #64748B; font-size: 0.875rem;">A archivé le poste <strong>Analyste d'affaires</strong></td>
                                </tr>
                                <tr>
                                    <td style="white-space: nowrap; color: #64748B; font-size: 0.85rem;">4 fév 2026, 10:30</td>
                                    <td><strong>Pierre Roy</strong></td>
                                    <td><span style="background: #DBEAFE; color: #1D4ED8; padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">Évaluation</span></td>
                                    <td style="color: #64748B; font-size: 0.875rem;">A visionné la vidéo de <strong>Luc Bergeron</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- PARAMETRES Section -->
                <div id="parametres-section" class="content-section">
                    <div class="page-header">
                        <h1 class="page-title" data-i18n="parametres_title">Paramètres</h1>
                    </div>
                    <!-- Horizontal Tabs Navigation -->
                    <div class="settings-tabs"
                        style="display: flex; gap: 0.5rem; border-bottom: 1px solid var(--border-color); margin-bottom: 1.5rem;">
                        <a href="#" class="settings-nav-item active" data-target="settings-company"
                            style="padding: 0.75rem 1.25rem; text-decoration: none; color: var(--primary-color); font-family: inherit; font-size: 0.875rem; font-weight: 500; border-bottom: 2px solid var(--primary-color); margin-bottom: -1px; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fa-regular fa-building"></i>
                            <span data-i18n="settings_company">Entreprise</span>
                        </a>
                        <a href="#" class="settings-nav-item" data-target="settings-branding"
                            style="padding: 0.75rem 1.25rem; text-decoration: none; color: var(--text-secondary); font-family: inherit; font-size: 0.875rem; border-bottom: 2px solid transparent; margin-bottom: -1px; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fa-solid fa-palette"></i>
                            <span data-i18n="settings_branding">Marque employeur</span>
                        </a>
                        <a href="#" class="settings-nav-item" data-target="settings-team"
                            style="padding: 0.75rem 1.25rem; text-decoration: none; color: var(--text-secondary); font-family: inherit; font-size: 0.875rem; border-bottom: 2px solid transparent; margin-bottom: -1px; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fa-solid fa-users"></i>
                            <span data-i18n="settings_team">Équipe</span>
                        </a>
                        <a href="#" class="settings-nav-item" data-target="settings-notifications"
                            style="padding: 0.75rem 1.25rem; text-decoration: none; color: var(--text-secondary); font-family: inherit; font-size: 0.875rem; border-bottom: 2px solid transparent; margin-bottom: -1px; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fa-solid fa-bell"></i>
                            <span data-i18n="settings_notifications">Notifications</span>
                        </a>
                        <a href="#" class="settings-nav-item" data-target="settings-billing"
                            style="padding: 0.75rem 1.25rem; text-decoration: none; color: var(--text-secondary); font-family: inherit; font-size: 0.875rem; border-bottom: 2px solid transparent; margin-bottom: -1px; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fa-solid fa-credit-card"></i>
                            <span data-i18n="settings_billing">Forfaits</span>
                        </a>
                        <a href="#" class="settings-nav-item" data-target="settings-communications"
                            style="padding: 0.75rem 1.25rem; text-decoration: none; color: var(--text-secondary); font-family: inherit; font-size: 0.875rem; border-bottom: 2px solid transparent; margin-bottom: -1px; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fa-solid fa-envelope"></i>
                            <span>Communication</span>
                        </a>
                        <a href="#" class="settings-nav-item" data-target="settings-integrations"
                            style="padding: 0.75rem 1.25rem; text-decoration: none; color: var(--text-secondary); font-family: inherit; font-size: 0.875rem; border-bottom: 2px solid transparent; margin-bottom: -1px; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fa-solid fa-plug"></i>
                            <span data-i18n="settings_integrations">Intégrations</span>
                        </a>
                    </div>

                    <!-- Content Area (full width now) -->

                    <!-- Settings Content: Company Info -->
                    <div class="card settings-pane" id="settings-company">
                        <div class="card-header"
                            style="border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                            <h2 class="card-title" data-i18n="settings_company_info">Informations de
                                l'entreprise</h2>
                        </div>

                        <form style="display: flex; flex-direction: column; gap: 1.5rem;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div class="form-group">
                                    <label class="form-label" data-i18n="form_company_name">Nom de
                                        l'entreprise</label>
                                    <input type="text" class="form-input" value="Acme Corporation">
                                </div>
                                <div class="form-group">
                                    <label class="form-label" data-i18n="form_industry">Secteur
                                        d'activité</label>
                                    <select class="form-select">
                                        <option>Technologie</option>
                                        <option>Finance</option>
                                        <option>Santé</option>
                                        <option>Commerce</option>
                                    </select>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div class="form-group">
                                    <label class="form-label" data-i18n="form_email">Email de contact</label>
                                    <input type="email" class="form-input" value="rh@acme.com">
                                </div>
                                <div class="form-group">
                                    <label class="form-label" data-i18n="form_phone">Téléphone</label>
                                    <input type="tel" class="form-input" value="+1 (514) 555-0123">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" data-i18n="form_address">Adresse</label>
                                <input type="text" class="form-input" value="1234 Rue Principale, Montréal, QC H2X 1Y6">
                            </div>

                            <div class="form-group">
                                <label class="form-label" data-i18n="form_description">Description de
                                    l'entreprise</label>
                                <textarea class="form-input" rows="4"
                                    style="resize: vertical;">Acme Corporation est une entreprise leader dans le domaine de la technologie, spécialisée dans les solutions innovantes pour les entreprises.</textarea>
                            </div>

                            <div
                                style="display: flex; justify-content: flex-end; gap: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                                <button type="button" class="btn btn-secondary" data-i18n="btn_cancel">Annuler</button>
                                <button type="submit" class="btn btn-primary" data-i18n="btn_save">Enregistrer</button>
                            </div>
                        </form>
                    </div>

                    <!-- Settings Content: Employer Branding -->
                    <div class="card settings-pane" id="settings-branding" style="display: none;">
                        <div class="card-header"
                            style="border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                            <h2 class="card-title" data-i18n="settings_branding_title">Personnalisation de la
                                marque</h2>
                        </div>

                        <form style="display: flex; flex-direction: column; gap: 1.5rem;">
                            <div class="form-group">
                                <label class="form-label" data-i18n="form_logo">Logo de l'entreprise</label>
                                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;"
                                    data-i18n="logo_help">Affiché sur votre profil et vos offres.</p>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <div
                                        style="width: 80px; height: 80px; background: #ffffff; border: 1px solid var(--border-color); border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; overflow:hidden;">
                                        <img src="https://ui-avatars.com/api/?name=Acme&background=3B82F6&color=fff&size=80"
                                            alt="Logo" style="width:100%; height:100%; object-fit:cover;">
                                    </div>
                                    <div style="display:flex; flex-direction:column; gap:0.5rem;">
                                        <button type="button" class="btn btn-secondary"
                                            data-i18n="btn_upload">Téléverser un logo</button>
                                        <span style="font-size: 0.75rem; color: var(--text-secondary);">JPG, PNG
                                            ou SVG. Max 2MB.</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" data-i18n="form_brand_color">Couleur de la
                                    marque</label>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <input type="color" class="form-input" value="#3B82F6"
                                        style="width: 60px; height: 40px; padding: 0.25rem;">
                                    <input type="text" class="form-input" value="#3B82F6" placeholder="#000000"
                                        style="width: 120px;">
                                </div>
                            </div>

                            <div
                                style="display: flex; justify-content: flex-end; gap: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                                <button type="button" class="btn btn-secondary" data-i18n="btn_cancel">Annuler</button>
                                <button type="submit" class="btn btn-primary" data-i18n="btn_save">Enregistrer</button>
                            </div>
                        </form>
                    </div>

                    <!-- Placeholder sections -->
                    <div class="card settings-pane" id="settings-team" style="display: none;">
                        <h2 class="card-title" data-i18n="settings_team">Équipe</h2>
                        <p>Gestion de l'équipe...</p>
                    </div>
                    <div class="card settings-pane" id="settings-notifications" style="display: none;">
                        <h2 class="card-title" data-i18n="settings_notifications">Notifications</h2>
                        <p>Préférences de notifications...</p>
                    </div>
                    <div class="settings-pane" id="settings-billing" style="display: none;">

                        <!-- Forfait actuel -->
                        <div class="card" style="margin-bottom: 1.5rem; border: 2px solid var(--primary-color);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                <h2 class="card-title" style="margin: 0;">Mon forfait</h2>
                                <span style="background: #DBEAFE; color: #1D4ED8; padding: 0.3rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase;">Actif</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1.5rem;">
                                <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #3B82F6, #1D4ED8); border-radius: 14px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fa-solid fa-gem" style="color: white; font-size: 1.5rem;"></i>
                                </div>
                                <div>
                                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--text-primary);">Découverte <span style="font-weight: 400; color: #64748B; font-size: 0.9rem;">— Gratuit</span></div>
                                    <div style="font-size: 0.875rem; color: #64748B; margin-top: 0.25rem;">1 affichage actif &middot; 5 candidats max &middot; Questions standards</div>
                                </div>
                            </div>
                        </div>

                        <!-- Changer de forfait -->
                        <div class="card" style="margin-bottom: 1.5rem;">
                            <h2 class="card-title" style="margin-bottom: 1.25rem;">Changer de forfait</h2>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">

                                <!-- À la carte -->
                                <div style="border: 1px solid var(--border-color); border-radius: 12px; padding: 1.5rem; text-align: center; transition: border-color 0.2s, box-shadow 0.2s;" onmouseover="this.style.borderColor='var(--primary-color)'; this.style.boxShadow='0 4px 20px rgba(59,130,246,0.15)';" onmouseout="this.style.borderColor='var(--border-color)'; this.style.boxShadow='none';">
                                    <div style="font-size: 1.1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.25rem;">À la carte</div>
                                    <div style="font-size: 2rem; font-weight: 800; color: var(--primary-color); margin: 0.75rem 0;">49$</div>
                                    <div style="font-size: 0.8rem; color: #64748B; margin-bottom: 1rem;">paiement unique</div>
                                    <ul style="list-style: none; padding: 0; margin: 0 0 1.25rem; text-align: left;">
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> 1 affichage</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> Accès 30 jours</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> Candidats illimités</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> Questions personnalisées</li>
                                    </ul>
                                    <button class="btn btn-primary" style="width: 100%; font-size: 0.85rem; padding: 0.6rem;">Acheter</button>
                                </div>

                                <!-- Pro (populaire) -->
                                <div style="border: 2px solid var(--primary-color); border-radius: 12px; padding: 1.5rem; text-align: center; position: relative; box-shadow: 0 4px 20px rgba(59,130,246,0.15);">
                                    <span style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: var(--primary-color); color: white; font-size: 0.7rem; font-weight: 700; padding: 0.2rem 0.75rem; border-radius: 9999px; text-transform: uppercase;">Populaire</span>
                                    <div style="font-size: 1.1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.25rem;">Pro</div>
                                    <div style="font-size: 2rem; font-weight: 800; color: var(--primary-color); margin: 0.75rem 0;">99$ <span style="font-size: 0.85rem; font-weight: 500; color: #64748B;">/mois</span></div>
                                    <div style="font-size: 0.8rem; color: #64748B; margin-bottom: 1rem;">Facturé annuellement</div>
                                    <ul style="list-style: none; padding: 0; margin: 0 0 1.25rem; text-align: left;">
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> 5 affichages simultanés</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> 40 candidats / affichage</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> Outils collaboratifs</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> Marque employeur</li>
                                    </ul>
                                    <button class="btn btn-primary" style="width: 100%; font-size: 0.85rem; padding: 0.6rem;">Passer au Pro</button>
                                </div>

                                <!-- Expert -->
                                <div style="border: 1px solid var(--border-color); border-radius: 12px; padding: 1.5rem; text-align: center; transition: border-color 0.2s, box-shadow 0.2s;" onmouseover="this.style.borderColor='var(--primary-color)'; this.style.boxShadow='0 4px 20px rgba(59,130,246,0.15)';" onmouseout="this.style.borderColor='var(--border-color)'; this.style.boxShadow='none';">
                                    <div style="font-size: 1.1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.25rem;">Expert</div>
                                    <div style="font-size: 2rem; font-weight: 800; color: var(--primary-color); margin: 0.75rem 0;">169$ <span style="font-size: 0.85rem; font-weight: 500; color: #64748B;">/mois</span></div>
                                    <div style="font-size: 0.8rem; color: #64748B; margin-bottom: 1rem;">Facturé annuellement</div>
                                    <ul style="list-style: none; padding: 0; margin: 0 0 1.25rem; text-align: left;">
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> 10 affichages simultanés</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> 60 candidats / affichage</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> Support prioritaire</li>
                                        <li style="font-size: 0.8rem; color: #64748B; padding: 0.3rem 0; display: flex; align-items: center; gap: 0.5rem;"><i class="fa-solid fa-check" style="color: #22C55E; font-size: 0.7rem;"></i> Accès API & Webhooks</li>
                                    </ul>
                                    <button class="btn btn-primary" style="width: 100%; font-size: 0.85rem; padding: 0.6rem;">Passer à Expert</button>
                                </div>
                            </div>
                        </div>

                        <!-- Historique des factures -->
                        <div class="card">
                            <h2 class="card-title" style="margin-bottom: 1.25rem;">Historique des factures</h2>
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Description</th>
                                        <th>Montant</th>
                                        <th>Statut</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="color: #64748B; font-size: 0.875rem;">6 fév 2026</td>
                                        <td><strong>Forfait Découverte</strong> — Activation</td>
                                        <td style="font-weight: 600;">0,00 $</td>
                                        <td><span style="background: #D1FAE5; color: #065F46; padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600;">Gratuit</span></td>
                                        <td><a href="#" style="color: var(--primary-color); font-size: 0.8rem; text-decoration: none;"><i class="fa-solid fa-download"></i></a></td>
                                    </tr>
                                </tbody>
                            </table>
                            <div style="text-align: center; padding: 1.5rem 0 0.5rem; color: #94A3B8; font-size: 0.85rem;">
                                <i class="fa-regular fa-file-lines" style="font-size: 1.5rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                                Aucune autre facture pour le moment.
                            </div>
                        </div>
                    </div>
                    <!-- Settings Content: Communications -->
                    <div class="settings-pane" id="settings-communications" style="display: none;">
                        <div class="card" style="margin-bottom: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.25rem;">
                                <div>
                                    <h2 class="card-title" style="margin: 0;">Modèles de courriels</h2>
                                    <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.25rem;">Gérez les messages envoyés aux candidats lors de vos processus de recrutement.</p>
                                </div>
                                <button class="btn btn-primary" onclick="openEmailTemplateEditor()" style="white-space: nowrap;">
                                    <i class="fa-solid fa-plus"></i> Nouveau modèle
                                </button>
                            </div>

                            <div id="email-templates-list">
                                <!-- Template 1 -->
                                <div class="email-template-row" style="display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 1px solid var(--border-color); border-radius: 10px; margin-bottom: 0.75rem; transition: box-shadow 0.15s;" onmouseover="this.style.boxShadow='0 2px 12px rgba(0,0,0,0.06)'" onmouseout="this.style.boxShadow='none'">
                                    <div style="width: 40px; height: 40px; background: #DBEAFE; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <i class="fa-solid fa-envelope" style="color: #1D4ED8;"></i>
                                    </div>
                                    <div style="flex: 1; min-width: 0;">
                                        <strong style="font-size: 0.9rem; color: var(--text-primary);">Confirmation de réception</strong>
                                        <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0.2rem 0 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Nous avons bien reçu votre candidature et nous vous en remercions. Notre équipe...</p>
                                    </div>
                                    <div style="display: flex; gap: 0.5rem; flex-shrink: 0;">
                                        <button class="btn-icon" title="Modifier" onclick="editEmailTemplate(0)"><i class="fa-solid fa-pen" style="color: var(--primary-color);"></i></button>
                                        <button class="btn-icon" title="Supprimer" onclick="deleteEmailTemplate(this)"><i class="fa-solid fa-trash" style="color: #EF4444;"></i></button>
                                    </div>
                                </div>

                                <!-- Template 2 -->
                                <div class="email-template-row" style="display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 1px solid var(--border-color); border-radius: 10px; margin-bottom: 0.75rem; transition: box-shadow 0.15s;" onmouseover="this.style.boxShadow='0 2px 12px rgba(0,0,0,0.06)'" onmouseout="this.style.boxShadow='none'">
                                    <div style="width: 40px; height: 40px; background: #D1FAE5; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <i class="fa-solid fa-circle-check" style="color: #065F46;"></i>
                                    </div>
                                    <div style="flex: 1; min-width: 0;">
                                        <strong style="font-size: 0.9rem; color: var(--text-primary);">Invitation à l'entrevue vidéo</strong>
                                        <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0.2rem 0 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Félicitations ! Votre profil a retenu notre attention. Nous vous invitons à réaliser...</p>
                                    </div>
                                    <div style="display: flex; gap: 0.5rem; flex-shrink: 0;">
                                        <button class="btn-icon" title="Modifier" onclick="editEmailTemplate(1)"><i class="fa-solid fa-pen" style="color: var(--primary-color);"></i></button>
                                        <button class="btn-icon" title="Supprimer" onclick="deleteEmailTemplate(this)"><i class="fa-solid fa-trash" style="color: #EF4444;"></i></button>
                                    </div>
                                </div>

                                <!-- Template 3 -->
                                <div class="email-template-row" style="display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 1px solid var(--border-color); border-radius: 10px; margin-bottom: 0.75rem; transition: box-shadow 0.15s;" onmouseover="this.style.boxShadow='0 2px 12px rgba(0,0,0,0.06)'" onmouseout="this.style.boxShadow='none'">
                                    <div style="width: 40px; height: 40px; background: #FEE2E2; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <i class="fa-solid fa-xmark" style="color: #991B1B;"></i>
                                    </div>
                                    <div style="flex: 1; min-width: 0;">
                                        <strong style="font-size: 0.9rem; color: var(--text-primary);">Refus poli</strong>
                                        <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0.2rem 0 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Nous vous remercions sincèrement pour l'intérêt que vous avez porté à notre offre...</p>
                                    </div>
                                    <div style="display: flex; gap: 0.5rem; flex-shrink: 0;">
                                        <button class="btn-icon" title="Modifier" onclick="editEmailTemplate(2)"><i class="fa-solid fa-pen" style="color: var(--primary-color);"></i></button>
                                        <button class="btn-icon" title="Supprimer" onclick="deleteEmailTemplate(this)"><i class="fa-solid fa-trash" style="color: #EF4444;"></i></button>
                                    </div>
                                </div>

                                <!-- Template 4 -->
                                <div class="email-template-row" style="display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 1px solid var(--border-color); border-radius: 10px; margin-bottom: 0.75rem; transition: box-shadow 0.15s;" onmouseover="this.style.boxShadow='0 2px 12px rgba(0,0,0,0.06)'" onmouseout="this.style.boxShadow='none'">
                                    <div style="width: 40px; height: 40px; background: #FEF3C7; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <i class="fa-solid fa-clock" style="color: #92400E;"></i>
                                    </div>
                                    <div style="flex: 1; min-width: 0;">
                                        <strong style="font-size: 0.9rem; color: var(--text-primary);">Poste comblé</strong>
                                        <p style="font-size: 0.8rem; color: var(--text-secondary); margin: 0.2rem 0 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Nous tenons à vous informer que le poste pour lequel vous avez postulé a été comblé...</p>
                                    </div>
                                    <div style="display: flex; gap: 0.5rem; flex-shrink: 0;">
                                        <button class="btn-icon" title="Modifier" onclick="editEmailTemplate(3)"><i class="fa-solid fa-pen" style="color: var(--primary-color);"></i></button>
                                        <button class="btn-icon" title="Supprimer" onclick="deleteEmailTemplate(this)"><i class="fa-solid fa-trash" style="color: #EF4444;"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Éditeur de modèle (caché par défaut) -->
                        <div class="card" id="email-template-editor" style="display: none;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.25rem;">
                                <h2 class="card-title" style="margin: 0;" id="email-editor-title">Nouveau modèle</h2>
                                <button class="btn-icon" onclick="closeEmailTemplateEditor()" style="font-size: 1.25rem;"><i class="fa-solid fa-xmark"></i></button>
                            </div>
                            <form onsubmit="saveEmailTemplate(event)" style="display: flex; flex-direction: column; gap: 1.25rem;">
                                <div class="form-group">
                                    <label class="form-label" style="font-weight: 600;">Titre du modèle</label>
                                    <input type="text" id="email-tpl-title" class="form-input" placeholder="Ex: Confirmation de réception" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" style="font-weight: 600;">Contenu du courriel</label>
                                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.5rem;">
                                        Variables disponibles : <code style="background: #F1F5F9; padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.75rem;">{{nom_candidat}}</code>
                                        <code style="background: #F1F5F9; padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.75rem;">{{titre_poste}}</code>
                                        <code style="background: #F1F5F9; padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.75rem;">{{nom_entreprise}}</code>
                                    </div>
                                    <textarea id="email-tpl-content" class="form-input" rows="8" style="resize: vertical;" placeholder="Bonjour {{nom_candidat}},&#10;&#10;..." required></textarea>
                                </div>
                                <div style="display: flex; justify-content: flex-end; gap: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                                    <button type="button" class="btn btn-secondary" onclick="closeEmailTemplateEditor()">Annuler</button>
                                    <button type="submit" class="btn btn-primary"><i class="fa-solid fa-check"></i> Enregistrer</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="card settings-pane" id="settings-integrations" style="display: none;">
                        <h2 class="card-title" data-i18n="settings_integrations">Intégrations</h2>
                        <p>Connectez vos outils...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>


    <!-- Modal for Poste -->
    <div class="modal-overlay" id="poste-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="modal_add_poste">Nouveau poste</h2>
                <button class="btn-icon" onclick="closeModal('poste')"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <form>
                <div class="form-group">
                    <label class="form-label" data-i18n="form_title">Titre du poste</label>
                    <input type="text" class="form-input" placeholder="Ex: Développeur Frontend">
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="form_department">Département</label>
                    <input type="text" class="form-input" placeholder="Ex: Technologie">
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="form_location">Lieu</label>
                    <input type="text" class="form-input" placeholder="Ex: Montréal, QC">
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="form_status">Statut</label>
                    <select class="form-select">
                        <option value="active" data-i18n="status_active">Actif</option>
                        <option value="paused" data-i18n="status_paused">Pausé</option>
                        <option value="closed" data-i18n="status_closed">Fermé</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('poste')"
                        data-i18n="btn_cancel">Annuler</button>
                    <button type="submit" class="btn btn-primary" data-i18n="btn_save">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Affichage -->
    <div class="modal-overlay" id="affichage-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="modal_add_affichage">Nouvel affichage</h2>
                <button class="btn-icon" onclick="closeModal('affichage')"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <form>
                <div class="form-group">
                    <label class="form-label" data-i18n="form_poste">Poste</label>
                    <select class="form-select">
                        <option>Développeur Frontend</option>
                        <option>Chef de projet</option>
                        <option>Designer UX/UI</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="form_platform">Plateforme</label>
                    <select class="form-select">
                        <option>LinkedIn</option>
                        <option>Indeed</option>
                        <option>Site carrière</option>
                        <option>Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="form_start_date">Date de début</label>
                    <input type="date" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="form_end_date">Date de fin</label>
                    <input type="date" class="form-input">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('affichage')"
                        data-i18n="btn_cancel">Annuler</button>
                    <button type="submit" class="btn btn-primary" data-i18n="btn_save">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Feedback -->
    <div class="modal-overlay" id="feedback-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="modal_feedback_title">Feedback</h2>
                <button class="btn-icon" onclick="closeModal('feedback')"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <form onsubmit="sendFeedback(event)">
                <div class="form-group">
                    <label class="form-label" data-i18n="label_type">Type de retour</label>
                    <div style="display: flex; gap: 1rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="feedback_type" value="problem" checked>
                            <span data-i18n="option_problem">Signaler un problème</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="feedback_type" value="idea">
                            <span data-i18n="option_idea">Soumettre une idée</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="label_message">Votre message</label>
                    <textarea class="form-input" rows="4" style="resize: vertical;"
                        data-i18n-placeholder="feedback_placeholder" placeholder="Dites-nous en plus..."
                        required></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('feedback')"
                        data-i18n="btn_cancel">Annuler</button>
                    <button type="submit" class="btn btn-primary" data-i18n="btn_send">Envoyer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Fermer l'affichage -->
    <div class="modal-overlay" id="close-affichage-modal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="modal-title">Fermer l'affichage</h2>
                <button class="btn-icon" onclick="closeModal('close-affichage')"><i class="fa-solid fa-xmark"></i></button>
            </div>

            <div style="margin-bottom: 1.25rem;">
                <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.5rem;">Vous êtes sur le point de fermer cet affichage. Sélectionnez les candidats à notifier par courriel.</p>
                <div style="background: #FEF3C7; border: 1px solid #FDE68A; border-radius: 8px; padding: 0.75rem 1rem; font-size: 0.8rem; color: #92400E; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                    Cette action est irréversible. L'affichage ne sera plus visible publiquement.
                </div>
            </div>

            <!-- Sélection des candidats -->
            <div style="margin-bottom: 1.25rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                    <label class="form-label" style="margin: 0; font-weight: 600;">Candidats à notifier</label>
                    <label style="font-size: 0.8rem; color: var(--primary-color); cursor: pointer; display: flex; align-items: center; gap: 0.4rem;">
                        <input type="checkbox" id="close-select-all" onchange="toggleSelectAllClose(this)" style="accent-color: var(--primary-color);">
                        Tout sélectionner
                    </label>
                </div>
                <div id="close-affichage-candidates" style="max-height: 200px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px;">
                    <!-- Filled by JS -->
                </div>
            </div>

            <!-- Message -->
            <div class="form-group" style="margin-bottom: 1.25rem;">
                <label class="form-label" style="font-weight: 600;">Message aux candidats</label>
                <div style="display: flex; gap: 0.5rem; margin-bottom: 0.75rem; flex-wrap: wrap;">
                    <button type="button" class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.3rem 0.75rem;" onclick="setCloseMessage('polite')">Refus poli</button>
                    <button type="button" class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.3rem 0.75rem;" onclick="setCloseMessage('filled')">Poste comblé</button>
                    <button type="button" class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.3rem 0.75rem;" onclick="setCloseMessage('custom')">Personnalisé</button>
                </div>
                <textarea id="close-affichage-message" class="form-input" rows="4" style="resize: vertical; width: 100%; box-sizing: border-box;" placeholder="Rédigez votre message...">Bonjour,

Nous vous remercions sincèrement pour l'intérêt que vous avez porté à notre offre. Après une analyse attentive de l'ensemble des candidatures reçues, nous avons décidé de poursuivre avec d'autres profils.

Nous conservons votre dossier et ne manquerons pas de vous recontacter si une opportunité correspondant à votre profil se présente.

Cordialement,
L'équipe de recrutement</textarea>
            </div>

            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeModal('close-affichage')">Annuler</button>
                <button type="button" class="btn" style="background: #DC2626; color: white; border: none;" onclick="confirmCloseAffichage()">
                    <i class="fa-solid fa-xmark"></i> Fermer l'affichage
                </button>
            </div>
        </div>
    </div>

    <script>
        // i18n translations
        const translations = {
            fr: {
                nav_dashboard: 'Tableau de bord',
                nav_postes: 'Postes',
                nav_affichages: 'Affichages',
                nav_candidats: 'Candidats',
                nav_parametres: 'Paramètres',
                search: 'Rechercher...',
                postes_title: 'Postes actifs',
                affichages_title: 'Affichages en cours',
                filter_all: 'Tous',
                filter_active: 'Actifs',
                filter_paused: 'Pausés',
                filter_closed: 'Fermés',
                filter_expired: 'Expirés',
                add_poste: 'Nouveau poste',
                add_affichage: 'Nouvel affichage',
                th_title: 'Titre',
                th_department: 'Département',
                th_location: 'Lieu',
                th_status: 'Statut',
                th_candidates: 'Candidats',
                th_created: 'Créé le',
                th_actions: 'Actions',
                th_poste: 'Poste',
                th_platform: 'Plateforme',
                th_start_date: 'Date début',
                th_end_date: 'Date fin',
                th_views: 'Vues',
                th_applications: 'Candidatures',
                status_active: 'Actif',
                status_paused: 'Pausé',
                status_closed: 'Fermé',
                modal_add_poste: 'Nouveau poste',
                modal_add_affichage: 'Nouvel affichage',
                form_title: 'Titre du poste',
                form_department: 'Département',
                form_location: 'Lieu',
                form_status: 'Statut',
                form_poste: 'Poste',
                form_platform: 'Plateforme',
                form_start_date: 'Date de début',
                form_end_date: 'Date de fin',
                btn_cancel: 'Annuler',
                btn_save: 'Enregistrer',
                btn_upload: 'Téléverser',
                // Action buttons
                action_edit: 'Modifier',
                action_view: 'Voir',
                action_delete: 'Supprimer',
                action_video: 'Voir vidéo',
                action_profile: 'Profil',
                action_shortlist: 'Mettre en favoris',
                // Candidats section
                candidats_title: 'Candidats',
                filter_new: 'Nouveaux',
                filter_reviewed: 'Évalués',
                filter_shortlisted: 'Favoris',
                filter_all_jobs: 'Tous les postes',
                th_candidate: 'Candidat',
                th_video: 'Vidéo',
                th_rating: 'Note',
                th_applied: 'Postulé le',
                status_new: 'Nouveau',
                status_reviewed: 'Évalué',
                status_rejected: 'Refusé',
                status_shortlisted: 'Favori',
                // Statistiques section
                statistiques_title: 'Tableau de bord',
                stat_active_jobs: 'Postes actifs',
                stat_total_candidates: 'Candidats totaux',
                stat_pending_review: "En attente d'évaluation",
                stat_shortlisted: 'Shortlistés',
                chart_applications: 'Candidatures par mois',
                chart_sources: 'Sources des candidatures',
                source_career: 'Site carrière (20%)',
                source_other: 'Autres (15%)',
                performance_title: 'Performance par poste',
                th_conversion: 'Taux conversion',
                th_avg_time: 'Temps moyen',
                // Parametres section
                parametres_title: 'Paramètres',
                settings_company: 'Entreprise',
                settings_team: 'Équipe',
                settings_notifications: 'Notifications',
                settings_billing: 'Forfaits',
                settings_integrations: 'Intégrations',
                settings_company_info: "Informations de l'entreprise",
                form_company_name: "Nom de l'entreprise",
                form_industry: "Secteur d'activité",
                form_email: 'Email de contact',
                form_phone: 'Téléphone',
                form_address: 'Adresse',
                form_description: "Description de l'entreprise",
                form_logo: "Logo de l'entreprise",
                btn_upload: 'Téléverser',
                form_brand_color: 'Couleur de la marque',
                // Feedback
                nav_feedback: 'Feedback',
                modal_feedback_title: 'Feedback',
                label_type: 'Type de retour',
                option_problem: 'Signaler un problème',
                option_idea: 'Soumettre une idée',
                label_message: 'Votre message',
                feedback_placeholder: 'Dites-nous en plus...',
                btn_send: 'Envoyer',
                feedback_success: 'Merci pour votre retour !',
                // Candidate Modal
                video_preview: 'Aperçu vidéo',
                comments_title: 'Commentaires',
                add_note_placeholder: 'Ajouter une note...'
            },
            en: {
                nav_dashboard: 'Dashboard',
                nav_postes: 'Positions',
                nav_affichages: 'Recruitment Drives',
                nav_candidats: 'Candidates',
                nav_parametres: 'Settings',
                search: 'Search...',
                postes_title: 'Active Positions',
                affichages_title: 'Current Drives',
                filter_all: 'All',
                filter_active: 'Active',
                filter_paused: 'Paused',
                filter_closed: 'Closed',
                filter_expired: 'Expired',
                add_poste: 'New Position',
                add_affichage: 'New Posting',
                th_title: 'Title',
                th_department: 'Department',
                th_location: 'Location',
                th_status: 'Status',
                th_candidates: 'Candidates',
                th_created: 'Created',
                th_actions: 'Actions',
                th_poste: 'Position',
                th_platform: 'Platform',
                th_start_date: 'Start Date',
                th_end_date: 'End Date',
                th_views: 'Views',
                th_applications: 'Applications',
                status_active: 'Active',
                status_paused: 'Paused',
                status_closed: 'Closed',
                modal_add_poste: 'New Position',
                modal_add_affichage: 'New Posting',
                form_title: 'Position Title',
                form_department: 'Department',
                form_location: 'Location',
                form_status: 'Status',
                form_poste: 'Position',
                form_platform: 'Platform',
                form_start_date: 'Start Date',
                form_end_date: 'End Date',
                btn_cancel: 'Cancel',
                btn_save: 'Save',
                btn_upload: 'Upload',
                // Action buttons
                action_edit: 'Edit',
                action_view: 'View',
                action_delete: 'Delete',
                action_video: 'Watch video',
                action_profile: 'Profile',
                action_shortlist: 'Mark as Favorite',
                // Candidats section
                candidats_title: 'Candidates',
                filter_new: 'New',
                filter_reviewed: 'Reviewed',
                filter_shortlisted: 'Favorites',
                filter_all_jobs: 'All positions',
                th_candidate: 'Candidate',
                th_video: 'Video',
                th_rating: 'Rating',
                th_applied: 'Applied',
                status_new: 'New',
                status_reviewed: 'Reviewed',
                status_rejected: 'Rejected',
                status_shortlisted: 'Favorite',
                // Statistiques section
                // Statistiques section
                statistiques_title: 'Dashboard',
                stat_active_jobs: 'Active positions',
                stat_total_candidates: 'Total candidates',
                stat_pending_review: 'Pending review',
                stat_shortlisted: 'Shortlisted',
                chart_applications: 'Applications by month',
                chart_sources: 'Application sources',
                source_career: 'Career site (20%)',
                source_other: 'Other (15%)',
                performance_title: 'Performance by position',
                th_conversion: 'Conversion rate',
                th_avg_time: 'Avg. time',
                // Parametres section
                parametres_title: 'Settings',
                settings_company: 'Company',
                settings_team: 'Team',
                settings_notifications: 'Notifications',
                settings_billing: 'Plans',
                settings_integrations: 'Integrations',
                settings_company_info: 'Company information',
                form_company_name: 'Company name',
                form_industry: 'Industry',
                form_email: 'Contact email',
                form_phone: 'Phone',
                form_phone: 'Phone',
                form_address: 'Address',
                form_description: 'Company description',
                form_logo: 'Company logo',
                btn_upload: 'Upload',
                settings_branding: 'Employer Branding',
                settings_branding_title: 'Brand Customization',
                logo_help: 'Displayed on your profile and postings.',
                form_phone: 'Phone',
                form_address: 'Address',
                form_description: 'Company description',
                form_logo: 'Company logo',
                btn_upload: 'Upload',
                settings_branding: 'Employer Branding',
                settings_branding_title: 'Brand Customization',
                logo_help: 'Displayed on your profile and postings.',
                form_brand_color: 'Brand Color',
                // Feedback
                nav_feedback: 'Feedback',
                modal_feedback_title: 'Feedback',
                label_type: 'Feedback Type',
                option_problem: 'Report a Problem',
                option_idea: 'Submit an Idea',
                label_message: 'Your Message',
                feedback_placeholder: 'Tell us more...',
                btn_send: 'Send',
                feedback_success: 'Thank you for your feedback!',
                // Candidate Modal
                video_preview: 'Video Preview',
                comments_title: 'Comments',
                add_note_placeholder: 'Add a note...'
            }
        };

        let currentLang = 'fr';

        // Apply translations
        function applyTranslations(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;

            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (translations[lang][key]) {
                    el.placeholder = translations[lang][key];
                }
            });

            // Translate title attributes
            document.querySelectorAll('[data-i18n-title]').forEach(el => {
                const key = el.getAttribute('data-i18n-title');
                if (translations[lang][key]) {
                    el.title = translations[lang][key];
                }
            });

            // Update lang buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
        }

        // Language switcher
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                applyTranslations(btn.dataset.lang);
            });
        });

        // Navigation logic
        function activateNavItem(item) {
            // Update active nav
            document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
            item.classList.add('active');

            // Accordion: close others
            document.querySelectorAll('.nav-submenu').forEach(submenu => {
                if (item.dataset.section !== submenu.dataset.parent) {
                    submenu.classList.remove('open');
                }
            });
            document.querySelectorAll('.submenu-arrow').forEach(arrow => {
                if (!item.contains(arrow)) {
                    arrow.style.transform = 'rotate(0deg)';
                }
            });

            // Open own submenu
            if (item.classList.contains('has-submenu')) {
                const section = item.dataset.section;
                const submenu = document.querySelector(`.nav-submenu[data-parent="${section}"]`);
                if (submenu) submenu.classList.add('open');

                const arrow = item.querySelector('.submenu-arrow');
                if (arrow) arrow.style.transform = 'rotate(180deg)';
            }

            // Show section
            const section = item.dataset.section;
            document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
            const sectionElement = document.getElementById(`${section}-section`);
            if (sectionElement) {
                sectionElement.classList.add('active');
            }
        }

        document.querySelectorAll('.nav-item[data-section]').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                activateNavItem(item);
                // Update URL
                const href = item.getAttribute('href');
                if (href) {
                    history.pushState(null, null, href);
                }
            });
        });

        // Hash Navigation
        function handleHashNavigation() {
            const hash = window.location.hash || '#dashboard';

            // 1. Check for specific subitem map (filter)
            const subitem = document.querySelector(`.nav-subitem[href="${hash}"]`);
            if (subitem) {
                // Find parent section
                const submenu = subitem.closest('.nav-submenu');
                if (submenu) {
                    const parentSection = submenu.dataset.parent;
                    const parentNavItem = document.querySelector(`.nav-item[data-section="${parentSection}"]`);
                    if (parentNavItem) {
                        activateNavItem(parentNavItem);
                        // No pushState, preserve specific hash
                    }
                }

                // Activate Tab
                const i18nKey = subitem.getAttribute('data-i18n');
                if (i18nKey) {
                    // Slight delay to ensure section is visible if needed
                    setTimeout(() => {
                        const activeSection = document.querySelector('.content-section.active');
                        if (activeSection) {
                            const tab = activeSection.querySelector(`.view-tab[data-i18n="${i18nKey}"]`);
                            if (tab) tab.click();
                        }
                    }, 0);
                }
                return;
            }

            // 2. Check main nav items
            const navItem = document.querySelector(`.nav-item[href="${hash}"]`);
            if (navItem) {
                activateNavItem(navItem);
            } else {
                // Fallback to dashboard
                const dashboard = document.querySelector('.nav-item[href="#dashboard"]');
                if (dashboard) activateNavItem(dashboard);
            }
        }

        window.addEventListener('hashchange', handleHashNavigation);
        window.addEventListener('load', function() {
            handleHashNavigation();
            // Ouvrir l'accordéon Affichages par défaut
            const affichagesSubmenu = document.querySelector('.nav-submenu[data-parent="affichages"]');
            if (affichagesSubmenu) affichagesSubmenu.classList.add('open');
            const affichagesArrow = document.querySelector('.nav-item[data-section="affichages"] .submenu-arrow');
            if (affichagesArrow) affichagesArrow.style.transform = 'rotate(180deg)';
        });

        // Modal functions
        function openModal(type) {
            document.getElementById(`${type}-modal`).classList.add('active');
        }

        function closeModal(type) {
            document.getElementById(`${type}-modal`).classList.remove('active');
        }

        // Close modal on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                }
            });
        });

        // Tab switching
        document.querySelectorAll('.view-tabs').forEach(tabGroup => {
            tabGroup.querySelectorAll('.view-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    tabGroup.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                });
            });
        });

        // Settings Tab Switching (Horizontal Tabs)
        document.querySelectorAll('.settings-nav-item').forEach(tab => {
            tab.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = tab.getAttribute('data-target');

                // Update tab active states
                document.querySelectorAll('.settings-nav-item').forEach(t => {
                    t.classList.remove('active');
                    t.style.color = 'var(--text-secondary)';
                    t.style.fontWeight = 'normal';
                    t.style.borderBottomColor = 'transparent';
                });
                tab.classList.add('active');
                tab.style.color = 'var(--primary-color)';
                tab.style.fontWeight = '500';
                tab.style.borderBottomColor = 'var(--primary-color)';

                // Show/hide content panes
                document.querySelectorAll('.settings-pane').forEach(pane => {
                    pane.style.display = 'none';
                });
                const targetPane = document.getElementById(targetId);
                if (targetPane) {
                    targetPane.style.display = 'block';
                }
            });
        });

        // Initialize Settings State
        document.addEventListener('DOMContentLoaded', () => {
            // Ensure only company is visible by default
            document.querySelectorAll('.settings-pane').forEach(pane => {
                if (pane.id !== 'settings-company') {
                    pane.style.display = 'none';
                }
            });
        });

        // Send Feedback
        function sendFeedback(e) {
            e.preventDefault();
            // In a real app, this would send data to the server

            // Get current language to show appropriate success message
            const successMsg = translations[currentLang]['feedback_success'];

            alert(successMsg);

            closeModal('feedback');
            e.target.reset();
        }

        // --- JOB DETAIL VISIBILITY LOGIC ---

        const postesData = {
            'frontend': {
                title: 'Développeur Frontend',
                dept: 'Technologie',
                location: 'Montréal, QC',
                status: 'Actif',
                statusClass: 'status-active',
                date: '2026-01-15',
                candidates: 12,
                description: "Nous recherchons un développeur frontend passionné pour rejoindre notre équipe. Vous travaillerez avec React, Tailwind et TypeScript pour créer des expériences utilisateur exceptionnelles.",
                questions: [
                    "Combien d'années d'expérience avez-vous avec React ?",
                    "Avez-vous déjà travaillé avec TypeScript ?",
                    "Pouvez-vous fournir un lien vers votre portfolio ?"
                ]
            },
            'manager': {
                title: 'Chef de projet',
                dept: 'Gestion',
                location: 'Toronto, ON',
                status: 'Actif',
                statusClass: 'status-active',
                date: '2026-01-20',
                candidates: 8,
                description: "Nous cherchons un chef de projet expérimenté pour mener à bien nos initiatives technologiques. Expérience en Agile/Scrum requise.",
                questions: [
                    "Avez-vous une certification PMP ?",
                    "Décrivez un projet complexe que vous avez géré.",
                    "Quel est votre style de leadership ?"
                ]
            },
            'designer': {
                title: 'Designer UX/UI',
                dept: 'Design',
                location: 'Télétravail',
                status: 'Pausé',
                statusClass: 'status-paused',
                date: '2026-01-10',
                candidates: 5,
                description: "Rejoignez notre équipe créative pour concevoir des interfaces intuitives et esthétiques. Figma est notre outil principal.",
                questions: [
                    "Lien vers votre portfolio Dribbble/Behance ?",
                    "Racontez-nous un défi UX que vous avez résolu.",
                    "Maîtrisez-vous les design systems ?"
                ]
            },
            'analyst': {
                title: 'Analyste d\'affaires',
                dept: 'Stratégie',
                location: 'Vancouver, BC',
                status: 'Fermé',
                statusClass: 'status-closed',
                date: '2025-12-01',
                candidates: 15,
                description: "Poste comblé. Merci de votre intérêt.",
                questions: []
            }
        };

        function showPosteDetail(id) {
            const data = postesData[id];
            if (!data) return;

            document.getElementById('detail-poste-title').textContent = data.title;
            document.getElementById('detail-poste-dept-loc').textContent = `${data.dept} • ${data.location}`;

            const statusBadge = document.getElementById('detail-poste-status');
            statusBadge.textContent = data.status;
            statusBadge.className = `status-badge ${data.statusClass}`;

            document.getElementById('detail-poste-description').textContent = data.description;
            document.getElementById('detail-poste-candidates').textContent = data.candidates;
            document.getElementById('detail-poste-date').textContent = data.date;

            const questionsList = document.getElementById('detail-poste-questions');
            questionsList.innerHTML = '';
            if (data.questions.length > 0) {
                data.questions.forEach(q => {
                    const li = document.createElement('li');
                    li.textContent = q;
                    li.style.marginBottom = '0.5rem';
                    questionsList.appendChild(li);
                });
            } else {
                questionsList.innerHTML = '<li style="list-style:none; margin-left:-1.5rem; color:var(--text-secondary);">Aucune question définie.</li>';
            }

            // Switch views
            document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById('poste-detail-section').classList.add('active');
            window.scrollTo(0, 0);
        }

        function goBackToPostes() {
            document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById('postes-section').classList.add('active');
        }

        // --- CANDIDATE MODAL LOGIC ---

        // Mock Data for Candidates
        const candidatesData = {
            'sophie': {
                name: 'Sophie Martin',
                role: 'Développeur Frontend',
                email: 'sophie.martin@email.com',
                phone: '+1 514 555-0101',
                status: 'new',
                isFavorite: false,
                rating: 4,
                video: '',
                comments: [
                    { user: 'Jean R.', date: 'Il y a 2h', text: 'Très bon portfolio, à rencontrer rapidement.', avatar: 'bg-blue-500' },
                    { user: 'Marie L.', date: 'Hier', text: 'CV intéressant, mais manque d\'expérience en React.', avatar: 'bg-green-500' }
                ]
            },
            'jean': {
                name: 'Jean Dupont',
                role: 'Chef de projet',
                email: 'jean.dupont@email.com',
                phone: '+1 514 555-0202',
                status: 'reviewed',
                isFavorite: true,
                rating: 5,
                video: '',
                comments: [
                    { user: 'Paul D.', date: 'Il y a 1j', text: 'Excellent fit culturel.', avatar: 'bg-purple-500' }
                ]
            },
            'marie': {
                name: 'Marie Tremblay',
                role: 'Designer UX/UI',
                email: 'marie.t@email.com',
                phone: '+1 514 555-0303',
                status: 'rejected',
                isFavorite: false,
                rating: 2,
                video: '',
                comments: [
                    { user: 'Sophie M.', date: 'Il y a 3j', text: 'Portfolio trop junior pour le poste senior.', avatar: 'bg-red-500' }
                ]
            },
            'pierre': {
                name: 'Pierre Lavoie',
                role: 'Développeur Frontend',
                email: 'pierre.l@email.com',
                phone: '+1 514 555-0404',
                status: 'shortlisted',
                isFavorite: true,
                rating: 5,
                video: '',
                comments: [
                    { user: 'Jean R.', date: 'Il y a 4h', text: 'Candidat coup de coeur !', avatar: 'bg-blue-500' }
                ]
            }
        };

        let currentCandidateId = null;

        function showCandidateDetail(id) {
            currentCandidateId = id;
            const data = candidatesData[id];
            if (!data) return;

            // Populate Info
            document.getElementById('detail-candidate-name').textContent = data.name;
            document.getElementById('detail-candidate-role-source').textContent = `${data.role} • LinkedIn`;
            document.getElementById('detail-candidate-email').textContent = data.email;
            document.getElementById('detail-candidate-phone').textContent = data.phone;

            // Status Selector
            const statusSelect = document.getElementById('detail-candidate-status-select');
            statusSelect.value = data.status;
            statusSelect.className = `status-select status-${data.status}`;

            // Favorite Button
            const favBtn = document.getElementById('detail-candidate-favorite');
            if (data.isFavorite) {
                favBtn.innerHTML = '<i class="fa-solid fa-star"></i>';
                favBtn.classList.add('active');
            } else {
                favBtn.innerHTML = '<i class="fa-regular fa-star"></i>';
                favBtn.classList.remove('active');
            }


            // Video (Mock logic)
            const videoPlayer = document.getElementById('detail-candidate-video-player');
            const placeholder = document.getElementById('detail-video-placeholder');
            if (data.video) {
                videoPlayer.style.display = 'block';
                placeholder.style.display = 'none';
                videoPlayer.src = data.video;
            } else {
                videoPlayer.style.display = 'none';
                placeholder.style.display = 'block';
            }

            // Set Rating
            setRatingUI(data.rating);

            // Render Timeline
            renderTimeline(data.comments);

            // Hide other sections and show detail
            document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById('candidate-detail-section').classList.add('active');

            // Scroll to top
            window.scrollTo(0, 0);
        }

        function toggleFavorite() {
            if (!currentCandidateId) return;
            const data = candidatesData[currentCandidateId];
            data.isFavorite = !data.isFavorite;

            const favBtn = document.getElementById('detail-candidate-favorite');
            if (data.isFavorite) {
                favBtn.innerHTML = '<i class="fa-solid fa-star"></i>';
                favBtn.classList.add('active');
            } else {
                favBtn.innerHTML = '<i class="fa-regular fa-star"></i>';
                favBtn.classList.remove('active');
            }
        }

        function updateCandidateStatus(newStatus) {
            if (!currentCandidateId) return;
            const data = candidatesData[currentCandidateId];
            data.status = newStatus;

            const statusSelect = document.getElementById('detail-candidate-status-select');
            statusSelect.className = `status-select status-${newStatus}`;
        }


        function goBackToCandidates() {
            document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById('candidats-section').classList.add('active');
        }

        function setRating(rating) {
            if (!currentCandidateId) return;
            candidatesData[currentCandidateId].rating = rating;
            setRatingUI(rating);
        }

        function setRatingUI(rating) {
            const stars = document.querySelectorAll('#detail-star-rating i');
            stars.forEach(star => {
                const val = parseInt(star.getAttribute('data-value'));
                if (val <= rating) {
                    star.classList.add('active');
                    star.style.color = '#F59E0B';
                } else {
                    star.classList.remove('active');
                    star.style.color = '#D1D5DB';
                }
            });
        }

        function renderTimeline(comments) {
            const container = document.getElementById('detail-timeline-list');
            container.innerHTML = '';

            comments.forEach(comment => {
                const item = document.createElement('div');
                item.className = 'timeline-item';
                // Random color generator for avatar if not set, or just use gray
                const avatarColor = comment.avatar ? comment.avatar : 'bg-gray-400';
                // Simple avatar circle
                const avatarHtml = `<div style="width: 32px; height: 32px; background-color: #E5E7EB; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600; color: #4B5563;">${comment.user.charAt(0)}</div>`;

                item.innerHTML = `
                    ${avatarHtml}
                    <div style="flex: 1;">
                        <div style="display: flex; justify-content: space-between; align-items: baseline;">
                            <strong style="font-size: 0.875rem;">${comment.user}</strong>
                            <span class="timeline-date">${comment.date}</span>
                        </div>
                        <p style="font-size: 0.875rem; color: var(--text-primary); margin-top: 0.25rem;">${comment.text}</p>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function addComment() {
            const input = document.getElementById('detail-new-comment-input');
            const text = input.value.trim();
            if (!text || !currentCandidateId) return;

            // Add to mock data
            candidatesData[currentCandidateId].comments.unshift({
                user: 'Moi',
                date: 'À l\'instant',
                text: text,
                avatar: ''
            });

            renderTimeline(candidatesData[currentCandidateId].comments);
            input.value = '';
        }

        // Initialize
        applyTranslations('fr');

        // User dropdown
        function toggleUserDropdown(e) {
            e.stopPropagation();
            document.getElementById('userDropdown').classList.toggle('open');
        }

        function closeUserDropdown() {
            document.getElementById('userDropdown').classList.remove('open');
        }

        document.addEventListener('click', function () {
            closeUserDropdown();
        });

        // Sidebar logic for mobile
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('active');
            document.querySelector('.sidebar-overlay').classList.toggle('active');
        }

        // Close sidebar when clicking a link on mobile
        document.querySelectorAll('.nav-item, .nav-subitem').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    document.querySelector('.sidebar').classList.remove('active');
                    document.querySelector('.sidebar-overlay').classList.remove('active');
                }
            });
        });

        // --- AFFICHAGE DETAIL VISIBILITY LOGIC ---

        const affichagesData = {
            'frontend-linkedin': {
                title: 'Développeur Frontend',
                platform: 'LinkedIn',
                start: '2026-01-15',
                end: '2026-02-15',
                status: 'Actif',
                statusClass: 'status-active',
                views: '1,245',
                apps: '12'
            },
            'frontend-site': {
                title: 'Développeur Frontend',
                platform: 'Site carrière',
                start: '2026-01-15',
                end: '2026-03-15',
                status: 'Actif',
                statusClass: 'status-active',
                views: '458',
                apps: '6'
            },
            'manager-linkedin': {
                title: 'Chef de projet',
                platform: 'LinkedIn',
                start: '2026-01-20',
                end: '2026-02-20',
                status: 'Actif',
                statusClass: 'status-active',
                views: '892',
                apps: '8'
            }
        };

        // Candidats par affichage (mock data)
        const affichageCandidats = {
            'frontend-linkedin': [
                { name: 'Sophie Martin', email: 'sophie.martin@email.com', color: '3B82F6', status: 'Nouveau', statusBg: '#DBEAFE', statusColor: '#1E40AF', video: true, stars: 4, date: '2026-02-01', id: 'sophie' },
                { name: 'Pierre Lavoie', email: 'pierre.l@email.com', color: 'EC4899', status: 'Favori', statusBg: '#D1FAE5', statusColor: '#065F46', video: true, stars: 4, date: '2026-01-22', id: 'pierre' },
                { name: 'Luc Bergeron', email: 'luc.b@email.com', color: 'F59E0B', status: 'Nouveau', statusBg: '#DBEAFE', statusColor: '#1E40AF', video: true, stars: 3, date: '2026-02-03', id: 'luc' },
                { name: 'Amélie Côté', email: 'amelie.c@email.com', color: '10B981', status: 'Évalué', statusBg: '#DBEAFE', statusColor: '#1D4ED8', video: true, stars: 5, date: '2026-01-30', id: 'amelie' },
                { name: 'Marc Gagnon', email: 'marc.g@email.com', color: '8B5CF6', status: 'Nouveau', statusBg: '#DBEAFE', statusColor: '#1E40AF', video: false, stars: 0, date: '2026-02-05', id: 'marc' },
            ],
            'frontend-site': [
                { name: 'Julie Fortin', email: 'julie.f@email.com', color: '3B82F6', status: 'Nouveau', statusBg: '#DBEAFE', statusColor: '#1E40AF', video: true, stars: 3, date: '2026-02-02', id: 'julie' },
                { name: 'David Chen', email: 'david.c@email.com', color: '10B981', status: 'Évalué', statusBg: '#DBEAFE', statusColor: '#1D4ED8', video: true, stars: 4, date: '2026-01-28', id: 'david' },
            ],
            'manager-linkedin': [
                { name: 'Jean Dupont', email: 'jean.dupont@email.com', color: '10B981', status: 'Évalué', statusBg: '#DBEAFE', statusColor: '#1D4ED8', video: true, stars: 5, date: '2026-01-28', id: 'jean' },
                { name: 'Nathalie Roy', email: 'nathalie.r@email.com', color: 'EC4899', status: 'Nouveau', statusBg: '#DBEAFE', statusColor: '#1E40AF', video: true, stars: 3, date: '2026-02-04', id: 'nathalie' },
                { name: 'François Léger', email: 'francois.l@email.com', color: 'F59E0B', status: 'Favori', statusBg: '#D1FAE5', statusColor: '#065F46', video: true, stars: 4, date: '2026-01-26', id: 'francois' },
            ]
        };

        function showAffichageDetail(id) {
            const data = affichagesData[id];
            if (!data) return;
            window._currentAffichageId = id;

            // Header
            document.getElementById('affichage-candidats-title').textContent = data.title;
            document.getElementById('affichage-candidats-subtitle').textContent = data.platform + ' · ' + data.apps + ' candidatures · ' + data.views + ' vues';
            const statusBadge = document.getElementById('affichage-candidats-status');
            statusBadge.textContent = data.status;
            statusBadge.className = 'status-badge ' + data.statusClass;

            // Build candidates table
            const candidates = affichageCandidats[id] || [];
            const tbody = document.getElementById('affichage-candidats-tbody');
            tbody.innerHTML = '';

            candidates.forEach(function(c) {
                const stars = Array.from({length: 5}, (_, i) =>
                    '<i class="fa-' + (i < c.stars ? 'solid' : 'regular') + ' fa-star"></i>'
                ).join('');

                const videoIcon = c.video
                    ? '<i class="fa-solid fa-circle-check" style="color: var(--success-color);"></i>'
                    : '<i class="fa-solid fa-circle-xmark" style="color: #CBD5E1;"></i>';

                const row = document.createElement('tr');
                row.style.cursor = 'pointer';
                row.onclick = function() { if (typeof showCandidateDetail === 'function') showCandidateDetail(c.id); };
                row.innerHTML =
                    '<td><div style="display: flex; align-items: center; gap: 0.75rem;">' +
                        '<img src="https://ui-avatars.com/api/?name=' + encodeURIComponent(c.name) + '&background=' + c.color + '&color=fff" class="avatar" alt="">' +
                        '<div><strong>' + c.name + '</strong><div style="font-size: 0.75rem; color: var(--text-secondary);">' + c.email + '</div></div>' +
                    '</div></td>' +
                    '<td><span class="status-badge" style="background:' + c.statusBg + '; color:' + c.statusColor + ';">' + c.status + '</span></td>' +
                    '<td>' + videoIcon + '</td>' +
                    '<td><div style="color: #F59E0B;">' + stars + '</div></td>' +
                    '<td>' + c.date + '</td>' +
                    '<td onclick="event.stopPropagation()">' +
                        '<button class="btn-icon" title="Voir vidéo"><i class="fa-solid fa-play"></i></button>' +
                        '<button class="btn-icon" title="Profil"><i class="fa-solid fa-user"></i></button>' +
                        '<button class="btn-icon" title="Favori"><i class="fa-regular fa-star"></i></button>' +
                    '</td>';
                tbody.appendChild(row);
            });

            if (candidates.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 2rem; color: #94A3B8;">Aucun candidat pour cet affichage.</td></tr>';
            }

            // Switch views
            document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById('affichage-candidats-section').classList.add('active');
            window.scrollTo(0, 0);
        }

        function goBackToAffichages() {
            document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById('affichages-section').classList.add('active');
        }

        // --- FERMER AFFICHAGE MODAL ---
        var currentCloseAffichageId = null;

        function openCloseAffichageModal() {
            currentCloseAffichageId = window._currentAffichageId;
            var candidates = affichageCandidats[currentCloseAffichageId] || [];
            var container = document.getElementById('close-affichage-candidates');
            container.innerHTML = '';

            candidates.forEach(function(c, i) {
                var div = document.createElement('div');
                div.style.cssText = 'display: flex; align-items: center; gap: 0.75rem; padding: 0.6rem 1rem; border-bottom: 1px solid var(--border-color);';
                if (i === candidates.length - 1) div.style.borderBottom = 'none';
                div.innerHTML =
                    '<input type="checkbox" class="close-candidate-cb" value="' + c.id + '" checked style="accent-color: var(--primary-color);">' +
                    '<img src="https://ui-avatars.com/api/?name=' + encodeURIComponent(c.name) + '&background=' + c.color + '&color=fff&size=32" style="width:32px; height:32px; border-radius:50%;" alt="">' +
                    '<div style="flex:1;"><strong style="font-size:0.875rem;">' + c.name + '</strong><div style="font-size:0.75rem; color:var(--text-secondary);">' + c.email + '</div></div>' +
                    '<span class="status-badge" style="background:' + c.statusBg + '; color:' + c.statusColor + '; font-size:0.7rem;">' + c.status + '</span>';
                container.appendChild(div);
            });

            if (candidates.length === 0) {
                container.innerHTML = '<div style="padding: 1.5rem; text-align: center; color: #94A3B8; font-size: 0.85rem;">Aucun candidat à notifier.</div>';
            }

            document.getElementById('close-select-all').checked = true;
            openModal('close-affichage');
        }

        function toggleSelectAllClose(cb) {
            document.querySelectorAll('.close-candidate-cb').forEach(function(box) {
                box.checked = cb.checked;
            });
        }

        var closeMessages = {
            polite: "Bonjour,\n\nNous vous remercions sincèrement pour l'intérêt que vous avez porté à notre offre. Après une analyse attentive de l'ensemble des candidatures reçues, nous avons décidé de poursuivre avec d'autres profils.\n\nNous conservons votre dossier et ne manquerons pas de vous recontacter si une opportunité correspondant à votre profil se présente.\n\nCordialement,\nL'équipe de recrutement",
            filled: "Bonjour,\n\nNous tenons à vous informer que le poste pour lequel vous avez postulé a été comblé. Nous avons reçu un grand nombre de candidatures de qualité et la décision a été difficile.\n\nNous vous encourageons à consulter nos futures offres et à postuler de nouveau.\n\nMerci et bonne continuation,\nL'équipe de recrutement",
            custom: ""
        };

        function setCloseMessage(type) {
            document.getElementById('close-affichage-message').value = closeMessages[type];
            if (type === 'custom') {
                document.getElementById('close-affichage-message').focus();
            }
        }

        // --- EMAIL TEMPLATE CRUD ---
        var emailTemplates = [
            { title: 'Confirmation de réception', content: "Bonjour {{nom_candidat}},\n\nNous avons bien reçu votre candidature pour le poste de {{titre_poste}} chez {{nom_entreprise}} et nous vous en remercions.\n\nNotre équipe examinera votre dossier dans les prochains jours. Nous vous tiendrons informé(e) de la suite du processus.\n\nCordialement,\nL'équipe de recrutement" },
            { title: "Invitation à l'entrevue vidéo", content: "Bonjour {{nom_candidat}},\n\nFélicitations ! Votre profil a retenu notre attention pour le poste de {{titre_poste}}.\n\nNous vous invitons à réaliser une entrevue vidéo de présélection. Vous pourrez enregistrer vos réponses au moment qui vous convient.\n\nCliquez sur le lien ci-dessous pour commencer :\n[Lien vers l'entrevue]\n\nCordialement,\nL'équipe de recrutement" },
            { title: 'Refus poli', content: "Bonjour {{nom_candidat}},\n\nNous vous remercions sincèrement pour l'intérêt que vous avez porté à notre offre de {{titre_poste}}. Après une analyse attentive de l'ensemble des candidatures reçues, nous avons décidé de poursuivre avec d'autres profils.\n\nNous conservons votre dossier et ne manquerons pas de vous recontacter si une opportunité correspondant à votre profil se présente.\n\nCordialement,\nL'équipe de recrutement" },
            { title: 'Poste comblé', content: "Bonjour {{nom_candidat}},\n\nNous tenons à vous informer que le poste de {{titre_poste}} pour lequel vous avez postulé a été comblé.\n\nNous avons reçu un grand nombre de candidatures de qualité et la décision a été difficile.\n\nNous vous encourageons à consulter nos futures offres et à postuler de nouveau.\n\nMerci et bonne continuation,\nL'équipe de recrutement" }
        ];
        var editingTemplateIndex = -1;

        function openEmailTemplateEditor(index) {
            editingTemplateIndex = (typeof index === 'number') ? index : -1;
            document.getElementById('email-editor-title').textContent = editingTemplateIndex >= 0 ? 'Modifier le modèle' : 'Nouveau modèle';
            document.getElementById('email-tpl-title').value = editingTemplateIndex >= 0 ? emailTemplates[editingTemplateIndex].title : '';
            document.getElementById('email-tpl-content').value = editingTemplateIndex >= 0 ? emailTemplates[editingTemplateIndex].content : '';
            document.getElementById('email-template-editor').style.display = 'block';
            document.getElementById('email-tpl-title').focus();
        }

        function closeEmailTemplateEditor() {
            document.getElementById('email-template-editor').style.display = 'none';
            editingTemplateIndex = -1;
        }

        function editEmailTemplate(index) {
            openEmailTemplateEditor(index);
        }

        function deleteEmailTemplate(btn) {
            var row = btn.closest('.email-template-row');
            var rows = Array.from(document.querySelectorAll('.email-template-row'));
            var index = rows.indexOf(row);
            if (index >= 0) {
                emailTemplates.splice(index, 1);
                row.remove();
            }
        }

        function saveEmailTemplate(e) {
            e.preventDefault();
            var title = document.getElementById('email-tpl-title').value.trim();
            var content = document.getElementById('email-tpl-content').value.trim();
            if (!title || !content) return;

            if (editingTemplateIndex >= 0) {
                emailTemplates[editingTemplateIndex] = { title: title, content: content };
            } else {
                emailTemplates.push({ title: title, content: content });
            }
            renderEmailTemplates();
            closeEmailTemplateEditor();
        }

        function renderEmailTemplates() {
            var container = document.getElementById('email-templates-list');
            container.innerHTML = '';
            var icons = [
                { bg: '#DBEAFE', color: '#1D4ED8', icon: 'fa-envelope' },
                { bg: '#D1FAE5', color: '#065F46', icon: 'fa-circle-check' },
                { bg: '#FEE2E2', color: '#991B1B', icon: 'fa-xmark' },
                { bg: '#FEF3C7', color: '#92400E', icon: 'fa-clock' },
                { bg: '#E0E7FF', color: '#3730A3', icon: 'fa-paper-plane' },
                { bg: '#FCE7F3', color: '#9D174D', icon: 'fa-heart' }
            ];
            emailTemplates.forEach(function(tpl, i) {
                var ic = icons[i % icons.length];
                var div = document.createElement('div');
                div.className = 'email-template-row';
                div.style.cssText = 'display:flex; align-items:center; gap:1rem; padding:1rem; border:1px solid var(--border-color); border-radius:10px; margin-bottom:0.75rem; transition:box-shadow 0.15s;';
                div.onmouseover = function(){ this.style.boxShadow='0 2px 12px rgba(0,0,0,0.06)'; };
                div.onmouseout = function(){ this.style.boxShadow='none'; };
                div.innerHTML =
                    '<div style="width:40px;height:40px;background:'+ic.bg+';border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0;"><i class="fa-solid '+ic.icon+'" style="color:'+ic.color+';"></i></div>' +
                    '<div style="flex:1;min-width:0;"><strong style="font-size:0.9rem;color:var(--text-primary);">'+tpl.title+'</strong><p style="font-size:0.8rem;color:var(--text-secondary);margin:0.2rem 0 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">'+tpl.content.substring(0, 100)+'...</p></div>' +
                    '<div style="display:flex;gap:0.5rem;flex-shrink:0;"><button class="btn-icon" title="Modifier" onclick="editEmailTemplate('+i+')"><i class="fa-solid fa-pen" style="color:var(--primary-color);"></i></button><button class="btn-icon" title="Supprimer" onclick="deleteEmailTemplate(this)"><i class="fa-solid fa-trash" style="color:#EF4444;"></i></button></div>';
                container.appendChild(div);
            });
        }

        function confirmCloseAffichage() {
            var selected = [];
            document.querySelectorAll('.close-candidate-cb:checked').forEach(function(cb) {
                selected.push(cb.value);
            });
            var message = document.getElementById('close-affichage-message').value;

            // Design only - just close modal and go back
            closeModal('close-affichage');
            goBackToAffichages();
        }

    </script>

    <!-- Feedback FAB -->
    <button class="feedback-fab" onclick="openModal('feedback')">
        <i class="fa-solid fa-bug"></i>
        <i class="fa-regular fa-lightbulb"></i>
    </button>

</body>

</html>